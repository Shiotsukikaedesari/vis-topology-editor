(function(e){function t(t){for(var i,r,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(i=!1)}i&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},s={app:0},a=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-8f236ec0":"fb07c4d9","chunk-e12799c0":"fda99449","chunk-e4ba8fba":"e5586e56","chunk-36483dbc":"09afdb28","chunk-7cf5389f":"214841b9","chunk-302a3dcd":"fdb2ac2a","chunk-4522ff63":"f9f055fe","chunk-593ca638":"b40a6ef3","chunk-6849e06d":"5c53610f","chunk-04ddcf76":"e9aa1f82","chunk-ceb76ad2":"7c80158f","chunk-2d229a09":"558f4336"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-8f236ec0":1,"chunk-e12799c0":1,"chunk-e4ba8fba":1,"chunk-36483dbc":1,"chunk-7cf5389f":1,"chunk-302a3dcd":1,"chunk-4522ff63":1,"chunk-593ca638":1,"chunk-6849e06d":1,"chunk-04ddcf76":1,"chunk-ceb76ad2":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-8f236ec0":"30ea3a0d","chunk-e12799c0":"15c4b95f","chunk-e4ba8fba":"ade08847","chunk-36483dbc":"2f089aa0","chunk-7cf5389f":"953c9c38","chunk-302a3dcd":"a98aaaa4","chunk-4522ff63":"39a1d176","chunk-593ca638":"55438a11","chunk-6849e06d":"46524e0d","chunk-04ddcf76":"76af4801","chunk-ceb76ad2":"509ec42b","chunk-2d229a09":"31d6cfe0"}[e]+".css",s=c.p+i,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var u=a[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===i||d===s))return t()}var f=document.getElementsByTagName("style");for(o=0;o<f.length;o++){u=f[o],d=u.getAttribute("data-href");if(d===i||d===s)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete r[e],h.parentNode.removeChild(h),n(a)},h.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){r[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,n){i=s[e]=[t,n]}));t.push(i[2]=a);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var f=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=s[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",f.name="ChunkLoadError",f.type=i,f.request=r,n[1](f)}s[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var h=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0166":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("path",{style:e.cssStyle,attrs:{d:e.lineShape.start,"marker-start":"url(#"+e.markerStart+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.end,"marker-end":"url(#"+e.markerEnd+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.mid,"marker-mid":"url(#"+e.markerMid+")"}})])},r=[],s=n("ade3"),a=n("5530"),o=(n("e9c4"),n("fb6a"),n("2af1"),n("d3b7"),n("159b"),n("99af"),n("b514")),c={name:"brokenLine",mixins:[o["a"]],props:{configure:{type:Object,default:function(){return{safeDistance:30}}},cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 0)",stroke:"rgba(40, 86, 255, 1)",strokeWidth:2}}}},data:function(){return{startDirection:{axis:"x",sign:1},endDirection:{axis:"x",sign:1}}},computed:{direction:function(){return{start:this.startMessage.direction,end:this.endMessage.direction}},lineShape:function(){var e=this.startDirection,t=this.endDirection,n=[];n=e.axis===t.axis&&e.sign===t.sign?this.sameAxisAndDirection(e.axis,e.sign):e.axis===t.axis&&e.sign!==t.sign?this.sameAxisDiffDirection(e.axis,e.sign):this.diffAxis();var i=[],r=[],s=[],a=n.length-1;if(a%2===0){var o=a/2;r=JSON.parse(JSON.stringify(n.slice(o-1,o+2))),1===o?(i=r,s=r):(i=JSON.parse(JSON.stringify(n.slice(0,o))),s=JSON.parse(JSON.stringify(n.slice(o+1))))}else{var c=Math.floor(a/2);i=JSON.parse(JSON.stringify(n.slice(0,c+1))),r=JSON.parse(JSON.stringify([n[c],{operate:"L",position:{x:n[c].position.x+(n[c+1].position.x-n[c].position.x)/2,y:n[c].position.y+(n[c+1].position.y-n[c].position.y)/2}},n[c+1]])),s=JSON.parse(JSON.stringify(n.slice(c+1)))}return r[0].operate="M",s[0].operate="M",{start:this.lineShapeToD(i),mid:this.lineShapeToD(r),end:this.lineShapeToD(s)}},startNode:function(){if(this.startMessage.node){var e=this.$store.getters["component/getNode"](this.startMessage.node);return{size:Object(a["a"])({},e.size),position:Object(a["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(a["a"])({},this.startMessage.position)}},endNode:function(){if(this.endMessage.node){var e=this.$store.getters["component/getNode"](this.endMessage.node);return{size:Object(a["a"])({},e.size),position:Object(a["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(a["a"])({},this.endMessage.position)}}},methods:{calcDirection:function(){var e={x:1,y:0},t=this.startMessage,n=this.endMessage,i=t.direction,r={x:-n.direction.x||0,y:-n.direction.y||0};0===i.x&&0===i.y&&(i.x=1,i.y=0),0===r.x&&0===r.y&&(r.x=i.x,r.y=i.y);var s=function(t){var n="",i=Math.round((e.x*t.x+e.y*t.y)/Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))*Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)));return n=1===i?{axis:"x",sign:1}:0===i?t.y<0?{axis:"y",sign:-1}:{axis:"y",sign:1}:{axis:"x",sign:-1},n};this.startDirection=s(i),this.endDirection=s(r)},nodeCalcMessage:function(){var e=Object(a["a"])({},this.startNode),t=Object(a["a"])({},this.endNode);return{min:{x:Math.min(e.position.x,t.position.x),y:Math.min(e.position.y,t.position.y)},max:{x:Math.max(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y+e.size.height,t.position.y+t.size.height)},intersect:{x:Math.max(e.position.x,t.position.x)<=Math.min(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y,t.position.y)<=Math.min(e.position.y+e.size.height,t.position.y+t.size.height)}}},sameAxisAndDirection:function(e,t){var n="x"===e?"y":"x";"y"===e&&(t=-t);var i=this.startNode;i.size.x=i.size.width,i.size.y=i.size.height;var r=this.endNode;r.size.x=r.size.width,r.size.y=r.size.height;var o=this.startPosition,c=this.endPosition,u=this.configure.safeDistance,d=[{operate:"M",position:Object(a["a"])({},o)}];if(Math.sign(c[e]-o[e])===t){var f,h,p=Math.abs((c[e]-o[e])/2);d.push({operate:"L",position:(f={},Object(s["a"])(f,e,o[e]+p*t),Object(s["a"])(f,n,o[n]),f)},{operate:"L",position:(h={},Object(s["a"])(h,e,o[e]+p*t),Object(s["a"])(h,n,c[n]),h)},{operate:"L",position:Object(a["a"])({},c)})}else{var l=this.nodeCalcMessage(),m=0,b=Math.sign(c[n]-o[n]);if(0===b&&(b=1),m=b>0?l.max[n]:l.min[n],l.intersect.x&&l.intersect.y){var g,v,y,O,x=0;x=t>=0?Math.max(i.position[e]+i.size[e],r.position[e]+r.size[e]):Math.min(i.position[e],r.position[e]);var k=(g={},Object(s["a"])(g,e,x+u*t),Object(s["a"])(g,n,o[n]),g);d.push({operate:"L",position:k}),v={},Object(s["a"])(v,e,k[e]),Object(s["a"])(v,n,m+u*b),k=v,d.push({operate:"L",position:k}),y={},Object(s["a"])(y,e,c[e]-u*t),Object(s["a"])(y,n,k[n]),k=y,d.push({operate:"L",position:k}),O={},Object(s["a"])(O,e,k[e]),Object(s["a"])(O,n,c[n]),k=O,d.push({operate:"L",position:k}),d.push({operate:"L",position:Object(a["a"])({},c)})}else{var j,w,L,S,M,z=(j={},Object(s["a"])(j,e,o[e]+u*t),Object(s["a"])(j,n,o[n]),j);if(d.push({operate:"L",position:z}),l.intersect[n])S={},Object(s["a"])(S,e,z[e]),Object(s["a"])(S,n,m+u*b),z=S;else M={},Object(s["a"])(M,e,z[e]),Object(s["a"])(M,n,z[n]+Math.abs((c[n]-o[n])/2)*b),z=M;d.push({operate:"L",position:z}),w={},Object(s["a"])(w,e,c[e]-u*t),Object(s["a"])(w,n,z[n]),z=w,d.push({operate:"L",position:z}),L={},Object(s["a"])(L,e,z[e]),Object(s["a"])(L,n,c[n]),z=L,d.push({operate:"L",position:z}),d.push({operate:"L",position:Object(a["a"])({},c)})}}return d},sameAxisDiffDirection:function(e,t){"y"===e&&(t=-t);var n=-t,i=this.nodeCalcMessage(),r=this.configure.safeDistance,o=this.startNode;o.size.x=o.size.width,o.size.y=o.size.height;var c=this.endNode;c.size.x=c.size.width,c.size.y=c.size.height;var u=this.startPosition,d=this.endPosition,f="x"===e?"y":"x",h=d[e]-u[e],p=d[f]-u[f],l=Math.sign(p);0===l&&(l=1);var m=[{operate:"M",position:Object(a["a"])({},u)}];if(c.size[f]/2<Math.abs(p)){var b,g,v=t>=0?i.max[e]:i.min[e],y=(b={},Object(s["a"])(b,e,v+r*t),Object(s["a"])(b,f,u[f]),b);m.push({operate:"L",position:y}),g={},Object(s["a"])(g,e,y[e]),Object(s["a"])(g,f,d[f]),y=g,m.push({operate:"L",position:y}),m.push({operate:"L",position:Object(a["a"])({},d)})}else if(Math.sign(h)===t&&c.size[f]/2>=Math.abs(p)){var O,x,k,j,w=(O={},Object(s["a"])(O,e,u[e]+r*t),Object(s["a"])(O,f,u[f]),O),L=t>0?c.position[e]-u[e]:u[e]-(c.position[e]+c.size[e]);L>0&&L<r&&(w[e]=u[e]+L/2*t),m.push({operate:"L",position:w});var S=c.position[f]+c.size[f],M=c.position[f],z=0;z=Math.abs(M-u[f])<=Math.abs(S-u[f])?1:-1,x={},Object(s["a"])(x,e,w[e]),Object(s["a"])(x,f,1===z?M-r:S+r),w=x,m.push({operate:"L",position:w}),k={},Object(s["a"])(k,e,d[e]-r*n),Object(s["a"])(k,f,w[f]),w=k,m.push({operate:"L",position:w}),j={},Object(s["a"])(j,e,w[e]),Object(s["a"])(j,f,d[f]),w=j,m.push({operate:"L",position:w}),m.push({operate:"L",position:Object(a["a"])({},d)})}else if(Math.sign(h)!==t&&o.size[f]/2>=Math.abs(p)){var N,E,P,_,D=(N={},Object(s["a"])(N,e,u[e]+r*t),Object(s["a"])(N,f,u[f]),N);m.push({operate:"L",position:D});var C=0;C=l?1:-1,E={},Object(s["a"])(E,e,D[e]),Object(s["a"])(E,f,D[f]+(o.size[f]/2+r)*C),D=E,m.push({operate:"L",position:D}),P={},Object(s["a"])(P,e,d[e]-r*n),Object(s["a"])(P,f,D[f]),D=P;var $=t>0?o.position[e]-d[e]:d[e]-(o.position[e]+o.size[e]);$>0&&$<r&&(D[e]=d[e]+$/2*t),m.push({operate:"L",position:D}),_={},Object(s["a"])(_,e,D[e]),Object(s["a"])(_,f,d[f]),D=_,m.push({operate:"L",position:D}),m.push({operate:"L",position:Object(a["a"])({},d)})}return m},diffAxis:function(){var e,t,n,i=this.startDirection,r=i.axis,o=i.sign,c=this.endDirection,u=c.axis,d=c.sign;"y"===r&&(o=-o,d=-d);var f=this.nodeCalcMessage(),h=this.configure.safeDistance,p=this.startNode;p.size.x=p.size.width,p.size.y=p.size.height;var l=this.endNode;l.size.x=l.size.width,l.size.y=l.size.height;var m,b,g=this.startPosition,v=this.endPosition,y=[{operate:"M",position:Object(a["a"])({},g)}];if(Math.sign(v[r]-g[r])===o&&Math.sign(v[u]-g[u])===-d)return y.push({operate:"L",position:(m={},Object(s["a"])(m,r,v[r]),Object(s["a"])(m,u,g[u]),m)},{operate:"L",position:(b={},Object(s["a"])(b,r,v[r]),Object(s["a"])(b,u,v[u]),b)}),y;var O=o>0?l.position[r]-g[r]:g[r]-(l.position[r]+l.size[r]);if(O>0&&Math.sign(v[u]-g[u])===d){var x,k,j,w=(x={},Object(s["a"])(x,r,0),Object(s["a"])(x,u,g[u]),x);return Math.abs(O)<h?w[r]=g[r]+O/2*o:w[r]=g[r]+h*o,y.push({operate:"L",position:w}),k={},Object(s["a"])(k,r,w[r]),Object(s["a"])(k,u,v[u]+h*d),w=k,y.push({operate:"L",position:w},{operate:"L",position:(j={},Object(s["a"])(j,r,v[r]),Object(s["a"])(j,u,w[u]),j)},{operate:"L",position:Object(a["a"])({},v)}),y}var L=d>0?p.position[u]-(l.position[u]+l.size[u]):v[u]-(p.position[u]+p.size[u]),S=o>0?v[r]-g[r]:g[r]-v[r];if(S<=0&&L>0){var M,z,N,E=(M={},Object(s["a"])(M,r,g[r]+h*o),Object(s["a"])(M,u,g[u]),M);return y.push({operate:"L",position:E}),z={},Object(s["a"])(z,r,E[r]),Object(s["a"])(z,u,(d>0?p.position[u]:p.position[u]+p.size[u])-L/2*d),E=z,y.push({operate:"L",position:E},{operate:"L",position:(N={},Object(s["a"])(N,r,v[r]),Object(s["a"])(N,u,E[u]),N)},{operate:"L",position:Object(a["a"])({},v)}),y}var P=(e={},Object(s["a"])(e,r,f[o>0?"max":"min"][r]+h*o),Object(s["a"])(e,u,g[u]),e);return y.push({operate:"L",position:P}),t={},Object(s["a"])(t,r,P[r]),Object(s["a"])(t,u,f[d>0?"max":"min"][u]+h*d),P=t,y.push({operate:"L",position:P}),n={},Object(s["a"])(n,r,v[r]),Object(s["a"])(n,u,P[u]),P=n,y.push({operate:"L",position:P},{operate:"L",position:Object(a["a"])({},v)}),y},lineShapeToD:function(e){var t="";return e.forEach((function(e){t+="".concat(e.operate," ").concat(e.position.x," ").concat(e.position.y)})),t}},watch:{direction:{handler:function(){this.calcDirection()},immediate:!0}}},u=c,d=n("2877"),f=Object(d["a"])(u,i,r,!1,null,"4af36f5b",null);t["default"]=f.exports},"0af7":function(e,t,n){var i={"./arrowWidget.vue":"61d4","./textWidget.vue":"e0bd"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id="0af7"},2395:function(e,t,n){},2475:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{node:"",line:""},getters:{node:function(e){return e.node},line:function(e){return e.line}},mutations:{setNode:function(e,t){var n=this.getters["structure/getNode"](t);e.node=n},clearNode:function(e){e.node=""},setLine:function(e,t){var n=this.getters["structure/getLine"](t);e.line=n},clearLine:function(e){e.line=""},clear:function(e){e.node="",e.line=""}},actions:{}}},2721:function(e,t,n){"use strict";t["a"]={props:{id:{type:String,default:""},use:{type:String,default:"work"}}}},"2f14":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("b64b"),n("b0c0");var i=function(e){var t={},n=function(e){Object.keys(e).forEach((function(n){e[n].default&&(t[n]="function"===typeof e[n].default?e[n].default():e[n].default)}))};return e.mixins&&e.mixins.length&&e.mixins.forEach((function(e){e.props&&n(e.props)})),e.props&&n(e.props),e.name?t.component=e.name:console.error("component must hava a name"),t}},4360:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var i=n("2b0e"),r=n("2f62"),s=n("89d3"),a={};s.keys().forEach((function(e){"./index.js"!==e&&(a[e.replace(/.\/|\.js$/g,"")]=s(e).default)})),i["default"].use(r["a"]),t["default"]=new r["a"].Store({state:{mode:"dev"},getters:{mode:function(e){return e.mode}},mutations:{setMode:function(e,t){e.mode=t}},actions:{},modules:a})},5209:function(e,t,n){"use strict";n("560b")},"52ee":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"vis-connectLine",class:{"vis-connectLine-acitve":e.active},on:{click:function(t){return t.stopPropagation(),e.activeLine.apply(null,arguments)}}},[n("circle",{staticClass:"vis-connectLine-point",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.startNode.x+", "+e.startNode.y+")"},on:{mousedown:function(t){return e.mousedown(t,"start")}}}),n("defs",[n(e.framework.markerStart,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerStart,!1)),n(e.framework.markerMid,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerMid,!1)),n(e.framework.markerEnd,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerEnd,!1))],1),n(e.framework.shape,e._b({tag:"component",attrs:{markerStart:""+e.id+e.framework.markerStart,markerMid:""+e.id+e.framework.markerMid,markerEnd:""+e.id+e.framework.markerEnd,startPosition:e.startPosition,endPosition:e.endPosition,startMessage:e.start,endMessage:e.end}},"component",e.shape,!1)),n("circle",{staticClass:"vis-connectLine-point",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.endNode.x+", "+e.endNode.y+")"},on:{mousedown:function(t){return e.mousedown(t,"end")}}})],1)},r=[],s=n("5530"),a=n("2721"),o=n("5862"),c=n("745b"),u={name:"connectLine",mixins:[a["a"]],components:Object(s["a"])(Object(s["a"])({},o["a"]),c["a"]),props:{framework:{type:Object,default:function(){return{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrow"}}},start:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},end:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},shape:{type:Object,required:!0},markerStart:{type:Object},markerMid:{type:Object},markerEnd:{type:Object}},data:function(){return{point:{r:10,style:{fill:"white",stroke:"green",strokeWidth:1,cursor:"move"}},startPosition:{x:0,y:0},endPosition:{x:0,y:0}}},computed:{startNode:function(){var e=this.$store.getters["component/getNode"](this.start.node);return e&&e.$refs[this.start.interface][0]?e.$refs[this.start.interface][0].point:this.start.position},endNode:function(){var e=this.$store.getters["component/getNode"](this.end.node);return e&&e.$refs[this.end.interface][0]?e.$refs[this.end.interface][0].point:this.end.position},canvas:function(){return this.$store.getters["canvas/canvas"]},active:function(){return this.$store.getters["active/line"].id===this.id}},methods:{activeLine:function(){this.$store.commit("active/clear"),this.$store.commit("active/setLine",this.id)},mousedown:function(e,t){this.$store.commit("connect/setFinishFlag",t);var n=this[t].position,i=this.canvas,r=this.$store.getters["canvas/scale"],a=Object(s["a"])({},n),o={x:e.clientX,y:e.clientY},c=i.getBoundingClientRect(),u=function(e){n.x=a.x+Math.round((e.clientX-o.x)*r),n.y=a.y+Math.round((e.clientY-o.y)*r)},d=function e(){i.removeEventListener("mousemove",u),i.removeEventListener("mouseup",e)},f=function e(){var t=30;n.x<=0?n.x=t:n.x>=c.width-5&&(n.x=c.width-t),n.y<=0?n.y=t:n.y>=c.height-5&&(n.y=c.height-t),i.removeEventListener("mousemove",u),i.removeEventListener("mouseup",d),i.removeEventListener("mouseleave",e)};i.addEventListener("mousemove",u),i.addEventListener("mouseup",d),i.addEventListener("mouseleave",f)}},watch:{startNode:{handler:function(e,t){e!==t&&(e!==this.start.position&&(this.start.position.x=e.x,this.start.position.y=e.y),this.startPosition=e)},immediate:!0},endNode:{handler:function(e,t){e!==t&&(e!==this.end.position&&(this.end.position.x=e.x,this.end.position.y=e.y),this.endPosition=e)},immediate:!0}}},d=u,f=(n("5209"),n("2877")),h=Object(f["a"])(d,i,r,!1,null,"a0190d76",null);t["a"]=h.exports},5364:function(e,t,n){},"551c":function(e,t,n){var i={"./brokenShape.vue":"0166","./linearShape.vue":"e1d2"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id="551c"},"560b":function(e,t,n){},"562e":function(e,t,n){"use strict";t["a"]=function(){return{name:"basicBroken",label:"基础折线",desp:"干净的折线",structure:{framework:{shape:"brokenShape",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=(n("d3b7"),n("bc3a")),s=n.n(r);console.log("".concat(window.location.href));var a={baseURL:"".concat(window.location.href)},o=s.a.create(a);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return{status:e.status,data:e.data}}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},i["default"].use(Plugin);Plugin;var c=n("5c96"),u=n.n(c),d=(n("0fae"),n("5364"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"top-nav"},[n("top-nav-view")],1),n("div",{staticClass:"container-main"},[n("div",{staticClass:"object-part"},[n("object-view")],1),n("div",{staticClass:"canvas-part"},[n("canvas-view")],1),n("div",{staticClass:"function-part"},[n("function-view")],1)])])}),f=[],h=(n("3ca3"),n("ddb0"),n("159b"),n("99af"),function(){return Promise.all([n.e("chunk-e4ba8fba"),n.e("chunk-7cf5389f")]).then(n.bind(null,"95c0"))}),p=function(){return Promise.all([n.e("chunk-e4ba8fba"),n.e("chunk-36483dbc")]).then(n.bind(null,"ce88"))},l=function(){return n.e("chunk-8f236ec0").then(n.bind(null,"655a"))},m=function(){return n.e("chunk-e12799c0").then(n.bind(null,"579d"))},b={components:{canvasView:h,objectView:p,functionView:l,topNavView:m},data:function(){return{key:""}},beforeCreate:function(){var e=this;this.axios.get("/icon/config.json").then((function(t){200===t.status?t.data.forEach((function(t){var n=e.axios.defaults.baseURL,i=document.createElement("script");i.src="".concat(n).concat(t.js);var r=document.createElement("link");r.rel="stylesheet",r.href="".concat(n).concat(t.css),document.body.appendChild(i),document.head.appendChild(r)})):e.$message.error("请求错误！")}))},mounted:function(){var e=localStorage.getItem("vis-topology");if(!e)return!1;e=JSON.parse(e);var t=this.$message({showClose:!0,message:"正在读取数据...",iconClass:"el-icon-loading",duration:0});this.$store.commit("stage/setSize",e.stage.size),this.$store.commit("structure/loadNodes",e.nodes),this.$store.commit("structure/loadLines",e.lines),t.close()}},g=b,v=(n("7c55"),n("2877")),y=Object(v["a"])(g,d,f,!1,null,null,null),O=y.exports,x=n("4360");i["default"].use(u.a),i["default"].config.productionTip=!1,new i["default"]({store:x["default"],render:function(e){return e(O)}}).$mount("#app")},5862:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var i=n("551c"),r={};i.keys().forEach((function(e){r[e.replace(/.\/|\.vue$/g,"")]=i(e).default}))},6059:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{canvas:null,offset:{x:0,y:0},scale:1,renderPower:2},getters:{canvas:function(e){return e.canvas},offset:function(e){return e.offset},scale:function(e){return e.scale},renderPower:function(e){return e.renderPower}},mutations:{setCanvas:function(e,t){e.canvas=t},setOffset:function(e,t){e.offset=Object.assign(e.offset,t)},setScale:function(e,t){e.scale=t},setRenderPower:function(e,t){e.renderPower=t}},actions:{}}},"61d4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"arrowWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:"0 0 "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"auto"}},[n("path",{style:e.cssStyle,attrs:{d:e.d}})])},r=[],s=(n("99af"),{name:"arrowWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{size:{width:12,height:12},ref:{x:30,y:6},tail:2}}},cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 1)",stroke:"",strokeWidth:1,cursor:"crosshair"}}}},computed:{d:function(){var e=this.configure.size,t=this.configure.tail;return"M 0 0 L ".concat(e.width," ").concat(e.height/2," L 0 ").concat(e.height," L ").concat(t," ").concat(e.height/2," L 0 0")}}}),a=s,o=n("2877"),c=Object(o["a"])(a,i,r,!1,null,"2dec7487",null);t["default"]=c.exports},"724c":function(e,t,n){"use strict";n.r(t);n("18a5");t["default"]={namespaced:!0,state:{transform:{show:!1,translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}},getters:{transform:function(e){return e.transform}},mutations:{setTransform:function(e,t){var n=t.key,i=t.value;void 0!==e.transform[n]&&(e.transform[n]=i)},transformNode:function(e,t){var n=this.getters["structure/getNode"](t);e.transform.translate=n.translate,e.transform.scale=n.scale,e.transform.rotate=n.rotate,e.transform.anchor=n.anchor,e.transform.size=n.size,e.transform.show=!0},resetTransform:function(e){e.transform={show:!1,translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}}},actions:{}}},"745b":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var i=n("0af7"),r={};i.keys().forEach((function(e){r[e.replace(/.\/|\.vue$/g,"")]=i(e).default}))},"7c55":function(e,t,n){"use strict";n("2395")},"80a6":function(e,t,n){"use strict";n.r(t);var i=n("5530"),r=(n("e9c4"),n("f9f8")),s=n("ec26"),a=n("5c96");t["default"]={namespaced:!0,state:{defaultLineStructure:r["b"][0].structure,finishFlag:"",dragStartPointer:{x:0,y:0}},getters:{},mutations:{applyDefaultLineStructure:function(e,t){e.defaultLineStructure=JSON.parse(JSON.stringify(t))},setDragStartPointer:function(e,t){e.dragStartPointer=Object.assign(e.dragStartPointer,t)},start:function(e,t){var n=this,r=JSON.parse(JSON.stringify(e.defaultLineStructure));r.id=Object(s["a"])(),r.start=Object(i["a"])({},t),r.end.position=Object(i["a"])({},r.start.position);var a=this.getters["component/getNode"](r.start.node);a.line.connective[r.id]="start",e.finishFlag="end",this.commit("structure/addLine",r),this.commit("active/setLine",r.id);var o=this.getters["canvas/canvas"],c=this.getters["canvas/scale"],u=r.end.position,d=Object(i["a"])({},u),f=e.dragStartPointer,h=function(e){u.x=d.x+Math.round((e.clientX-f.x)*c),u.y=d.y+Math.round((e.clientY-f.y)*c)},p=function e(){n.commit("structure/deleteLine",r.id),o.removeEventListener("mousemove",h),o.removeEventListener("mouseleave",e)},l=function e(){o.removeEventListener("mousemove",h),o.removeEventListener("mouseleave",p),o.removeEventListener("mouseup",e)};o.addEventListener("mousemove",h),o.addEventListener("mouseleave",p),o.addEventListener("mouseup",l)},finish:function(e,t){var n=this.getters["active/line"];if(!n)return!1;if(n.start.node&&t.node===n.start.node){var i=n.start.position,r=n.end.position,s=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2));return s<5&&this.commit("structure/deleteLine",n.id),a["Message"].warning("节点不能链接本身！"),!1}Object.assign(n.end,t),console.log(n);var o=this.getters["component/getNode"](n.end.node);o.line.connective[n.id]=e.finishFlag},setFinishFlag:function(e,t){e.finishFlag=t}},actions:{}}},"89d3":function(e,t,n){var i={"./active.js":"2475","./canvas.js":"6059","./component.js":"e030","./connect.js":"80a6","./controls.js":"724c","./helper.js":"96af","./index.js":"4360","./stage.js":"b58a","./structure.js":"bf24"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id="89d3"},"96af":function(e,t,n){"use strict";n.r(t);var i=n("2b0e");t["default"]={namespaced:!0,state:{statusStructures:i["default"].observable({}),adsorbStructures:i["default"].observable({})},getters:{},mutations:{},actions:{}}},b514:function(e,t,n){"use strict";t["a"]={props:{startPosition:{type:Object,required:!0},endPosition:{type:Object,required:!0},startMessage:{type:Object,required:!0},endMessage:{type:Object,required:!0},markerStart:{type:String},markerMid:{type:String},markerEnd:{type:String}}}},b58a:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{size:{width:827,height:1169},translate:{x:0,y:0}},getters:{size:function(e){return e.size},translate:function(e){return e.translate}},mutations:{setSize:function(e,t){e.size=t},setTranslate:function(e,t){e.translate=t}},actions:{}}},bf24:function(e,t,n){"use strict";n.r(t);var i=n("2b0e");t["default"]={namespaced:!0,state:{nodes:{},lines:{}},getters:{nodes:function(e){return e.nodes},lines:function(e){return e.lines},getNode:function(e){return function(t){return e.nodes[t]}},getLine:function(e){return function(t){return e.lines[t]}}},mutations:{addNode:function(e,t){e.nodes[t.id]=i["default"].observable(t),e.nodes.__ob__.dep.notify()},deleteNode:function(e,t){i["default"].delete(e.nodes,t)},addLine:function(e,t){e.lines[t.id]=i["default"].observable(t),e.lines.__ob__.dep.notify()},deleteLine:function(e,t){var n=e.lines[t];if(!n)return console.error("can not get this line id: '".concat(t,"'")),!1;if(n.start.node){var r=e.nodes[n.start.node];r&&(r.line.connective[n.id]?delete r.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}if(n.end.node){var s=e.nodes[n.end.node];s&&(s.line.connective[n.id]?delete s.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}i["default"].delete(e.lines,t)},clearNodes:function(e){e.nodes={}},clearLines:function(e){e.lines={}},loadNodes:function(e,t){e.nodes=t},loadLines:function(e,t){e.lines=t}},actions:{}}},def3:function(e,t,n){"use strict";t["a"]=function(){return{name:"basicLinear",label:"基础直线",desp:"干净的直线",structure:{framework:{shape:"linearShape",markerStart:"",markerMid:"",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}}},e030:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{nodes:{}},getters:{getNode:function(e){return function(t){return e.nodes[t]}}},mutations:{cacheNodes:function(e,t){e.nodes=t}},actions:{}}},e0bd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"textWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:-e.configure.size.width/2+" "+-e.configure.size.height/2+" "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"0"}},[n("rect",{style:e.shapeStyle,attrs:{width:e.configure.size.width,height:e.configure.size.height,transform:"translate("+-e.configure.size.width/2+", "+-e.configure.size.height/2+")"}}),n("text",{style:e.textStyle,attrs:{x:-e.configure.textLength/2,y:parseInt(e.cssStyle.fontSize)/2,"font-size":e.cssStyle.fontSize,textLength:e.configure.textLength}},[e._v(" "+e._s(e.configure.value)+" ")])])},r=[],s=(n("cb29"),{name:"textWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{size:{width:54,height:18},ref:{x:0,y:0},value:"一段文本",textLength:50}}},cssStyle:{type:Object,default:function(){return{color:"rgba(255, 255, 255,1)",fontSize:"14px",fill:"rgba(15, 236, 182, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:0,padding:2}}}},computed:{textStyle:function(){var e=this.cssStyle;return{fill:e.color,fontSize:e.fontSize}},shapeStyle:function(){var e=this.cssStyle;return{fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth}}}}),a=s,o=n("2877"),c=Object(o["a"])(a,i,r,!1,null,"149c0d0a",null);t["default"]=c.exports},e1d2:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("path",{style:e.cssStyle,attrs:{d:"M "+e.startPosition.x+" "+e.startPosition.y+" L "+e.middlePoint.x+" "+e.middlePoint.y+" L "+e.endPosition.x+" "+e.endPosition.y+" ","marker-start":"url(#"+e.markerStart+")","marker-mid":"url(#"+e.markerMid+")","marker-end":"url(#"+e.markerEnd+")"}})},r=[],s=n("b514"),a={name:"linear",mixins:[s["a"]],props:{cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 147, 255, 1)",strokeWidth:2}}}},computed:{middlePoint:function(){return{x:(this.endPosition.x-this.startPosition.x)/2+this.startPosition.x,y:(this.endPosition.y-this.startPosition.y)/2+this.startPosition.y}}}},o=a,c=n("2877"),u=Object(c["a"])(o,i,r,!1,null,"75974c7b",null);t["default"]=u.exports},f9f8:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var i=n("7ce2"),r=n.n(i),s=n("5862"),a=n("745b"),o=n("52ee"),c=n("2f14"),u=n("def3"),d=n("562e"),f=function(e){var t=r()({},Object(c["a"])(o["a"]),e),n=t.framework;return n.shape&&s["a"][n.shape]&&(t.shape=r()(Object(c["a"])(s["a"][n.shape]),t.shape)),n.markerStart&&a["a"][n.markerStart]&&(t.markerStart=r()(Object(c["a"])(a["a"][n.markerStart]),t.markerStart)),n.markerMid&&a["a"][n.markerMid]&&(t.markerMid=r()(Object(c["a"])(a["a"][n.markerMid]),t.markerMid)),n.markerEnd&&a["a"][n.markerEnd]&&(t.markerEnd=r()(Object(c["a"])(a["a"][n.markerEnd]),t.markerEnd)),t},h=function(e){return Object.assign({},e,{structure:f(e.structure)})},p=[h(Object(u["a"])()),h(Object(d["a"])())]}});