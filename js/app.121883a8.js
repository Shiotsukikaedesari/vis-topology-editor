(function(e){function t(t){for(var i,s,a=t[0],c=t[1],u=t[2],h=0,f=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0166":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("path",{style:e.cssStyle,attrs:{d:e.lineShape.start,"marker-start":"url(#"+e.markerStart+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.end,"marker-end":"url(#"+e.markerEnd+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.mid,"marker-mid":"url(#"+e.markerMid+")"}})])},r=[],o=n("ade3"),s=n("5530"),a=(n("e9c4"),n("fb6a"),n("2af1"),n("d3b7"),n("159b"),n("99af"),n("b514")),c={name:"brokenLine",mixins:[a["a"]],props:{configure:{type:Object,default:function(){return{safeDistance:30}}},cssStyle:{type:Object,default:function(){return{fill:"transparent",stroke:"#2856FF",strokeWidth:2}}}},data:function(){return{startDirection:{axis:"x",sign:1},endDirection:{axis:"x",sign:1}}},computed:{direction:function(){return{start:this.startMessage.direction,end:this.endMessage.direction}},lineShape:function(){var e=this.startDirection,t=this.endDirection,n=[];n=e.axis===t.axis&&e.sign===t.sign?this.sameAxisAndDirection(e.axis,e.sign):e.axis===t.axis&&e.sign!==t.sign?this.sameAxisDiffDirection(e.axis,e.sign):this.diffAxis();var i=[],r=[],o=[],s=n.length-1;if(s%2===0){var a=s/2;r=JSON.parse(JSON.stringify(n.slice(a-1,a+2))),1===a?(i=r,o=r):(i=JSON.parse(JSON.stringify(n.slice(0,a))),o=JSON.parse(JSON.stringify(n.slice(a+1))))}else{var c=Math.floor(s/2);i=JSON.parse(JSON.stringify(n.slice(0,c+1))),r=JSON.parse(JSON.stringify([n[c],{operate:"L",position:{x:n[c].position.x+(n[c+1].position.x-n[c].position.x)/2,y:n[c].position.y+(n[c+1].position.y-n[c].position.y)/2}},n[c+1]])),o=JSON.parse(JSON.stringify(n.slice(c+1)))}return r[0].operate="M",o[0].operate="M",{start:this.lineShapeToD(i),mid:this.lineShapeToD(r),end:this.lineShapeToD(o)}},startNode:function(){if(this.startMessage.node){var e=this.$store.getters["component/getNode"](this.startMessage.node);return{size:Object(s["a"])({},e.size),position:Object(s["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(s["a"])({},this.startMessage.position)}},endNode:function(){if(this.endMessage.node){var e=this.$store.getters["component/getNode"](this.endMessage.node);return{size:Object(s["a"])({},e.size),position:Object(s["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(s["a"])({},this.endMessage.position)}}},methods:{calcDirection:function(){var e={x:1,y:0},t=this.startMessage,n=this.endMessage,i=t.direction,r={x:-n.direction.x||0,y:-n.direction.y||0};0===i.x&&0===i.y&&(i.x=1,i.y=0),0===r.x&&0===r.y&&(r.x=i.x,r.y=i.y);var o=function(t){var n="",i=Math.round((e.x*t.x+e.y*t.y)/Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))*Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)));return n=1===i?{axis:"x",sign:1}:0===i?t.y<0?{axis:"y",sign:-1}:{axis:"y",sign:1}:{axis:"x",sign:-1},n};this.startDirection=o(i),this.endDirection=o(r)},nodeCalcMessage:function(){var e=Object(s["a"])({},this.startNode),t=Object(s["a"])({},this.endNode);return{min:{x:Math.min(e.position.x,t.position.x),y:Math.min(e.position.y,t.position.y)},max:{x:Math.max(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y+e.size.height,t.position.y+t.size.height)},intersect:{x:Math.max(e.position.x,t.position.x)<=Math.min(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y,t.position.y)<=Math.min(e.position.y+e.size.height,t.position.y+t.size.height)}}},sameAxisAndDirection:function(e,t){var n="x"===e?"y":"x";"y"===e&&(t=-t);var i=this.startNode;i.size.x=i.size.width,i.size.y=i.size.height;var r=this.endNode;r.size.x=r.size.width,r.size.y=r.size.height;var a=this.startPosition,c=this.endPosition,u=this.configure.safeDistance,d=[{operate:"M",position:Object(s["a"])({},a)}];if(Math.sign(c[e]-a[e])===t){var h,f,l=Math.abs((c[e]-a[e])/2);d.push({operate:"L",position:(h={},Object(o["a"])(h,e,a[e]+l*t),Object(o["a"])(h,n,a[n]),h)},{operate:"L",position:(f={},Object(o["a"])(f,e,a[e]+l*t),Object(o["a"])(f,n,c[n]),f)},{operate:"L",position:Object(s["a"])({},c)})}else{var p=this.nodeCalcMessage(),m=0,g=Math.sign(c[n]-a[n]);if(0===g&&(g=1),m=g>0?p.max[n]:p.min[n],p.intersect.x&&p.intersect.y){var v,y,b,x,w=0;w=t>=0?Math.max(i.position[e]+i.size[e],r.position[e]+r.size[e]):Math.min(i.position[e],r.position[e]);var O=(v={},Object(o["a"])(v,e,w+u*t),Object(o["a"])(v,n,a[n]),v);d.push({operate:"L",position:O}),y={},Object(o["a"])(y,e,O[e]),Object(o["a"])(y,n,m+u*g),O=y,d.push({operate:"L",position:O}),b={},Object(o["a"])(b,e,c[e]-u*t),Object(o["a"])(b,n,O[n]),O=b,d.push({operate:"L",position:O}),x={},Object(o["a"])(x,e,O[e]),Object(o["a"])(x,n,c[n]),O=x,d.push({operate:"L",position:O}),d.push({operate:"L",position:Object(s["a"])({},c)})}else{var k,j,S,z,L,E=(k={},Object(o["a"])(k,e,a[e]+u*t),Object(o["a"])(k,n,a[n]),k);if(d.push({operate:"L",position:E}),p.intersect[n])z={},Object(o["a"])(z,e,E[e]),Object(o["a"])(z,n,m+u*g),E=z;else L={},Object(o["a"])(L,e,E[e]),Object(o["a"])(L,n,E[n]+Math.abs((c[n]-a[n])/2)*g),E=L;d.push({operate:"L",position:E}),j={},Object(o["a"])(j,e,c[e]-u*t),Object(o["a"])(j,n,E[n]),E=j,d.push({operate:"L",position:E}),S={},Object(o["a"])(S,e,E[e]),Object(o["a"])(S,n,c[n]),E=S,d.push({operate:"L",position:E}),d.push({operate:"L",position:Object(s["a"])({},c)})}}return d},sameAxisDiffDirection:function(e,t){"y"===e&&(t=-t);var n=-t,i=this.nodeCalcMessage(),r=this.configure.safeDistance,a=this.startNode;a.size.x=a.size.width,a.size.y=a.size.height;var c=this.endNode;c.size.x=c.size.width,c.size.y=c.size.height;var u=this.startPosition,d=this.endPosition,h="x"===e?"y":"x",f=d[e]-u[e],l=d[h]-u[h],p=Math.sign(l);0===p&&(p=1);var m=[{operate:"M",position:Object(s["a"])({},u)}];if(c.size[h]/2<Math.abs(l)){var g,v,y=t>=0?i.max[e]:i.min[e],b=(g={},Object(o["a"])(g,e,y+r*t),Object(o["a"])(g,h,u[h]),g);m.push({operate:"L",position:b}),v={},Object(o["a"])(v,e,b[e]),Object(o["a"])(v,h,d[h]),b=v,m.push({operate:"L",position:b}),m.push({operate:"L",position:Object(s["a"])({},d)})}else if(Math.sign(f)===t&&c.size[h]/2>=Math.abs(l)){var x,w,O,k,j=(x={},Object(o["a"])(x,e,u[e]+r*t),Object(o["a"])(x,h,u[h]),x),S=t>0?c.position[e]-u[e]:u[e]-(c.position[e]+c.size[e]);S>0&&S<r&&(j[e]=u[e]+S/2*t),m.push({operate:"L",position:j});var z=c.position[h]+c.size[h],L=c.position[h],E=0;E=Math.abs(L-u[h])<=Math.abs(z-u[h])?1:-1,w={},Object(o["a"])(w,e,j[e]),Object(o["a"])(w,h,1===E?L-r:z+r),j=w,m.push({operate:"L",position:j}),O={},Object(o["a"])(O,e,d[e]-r*n),Object(o["a"])(O,h,j[h]),j=O,m.push({operate:"L",position:j}),k={},Object(o["a"])(k,e,j[e]),Object(o["a"])(k,h,d[h]),j=k,m.push({operate:"L",position:j}),m.push({operate:"L",position:Object(s["a"])({},d)})}else if(Math.sign(f)!==t&&a.size[h]/2>=Math.abs(l)){var N,M,$,_,P=(N={},Object(o["a"])(N,e,u[e]+r*t),Object(o["a"])(N,h,u[h]),N);m.push({operate:"L",position:P});var C=0;C=p?1:-1,M={},Object(o["a"])(M,e,P[e]),Object(o["a"])(M,h,P[h]+(a.size[h]/2+r)*C),P=M,m.push({operate:"L",position:P}),$={},Object(o["a"])($,e,d[e]-r*n),Object(o["a"])($,h,P[h]),P=$;var W=t>0?a.position[e]-d[e]:d[e]-(a.position[e]+a.size[e]);W>0&&W<r&&(P[e]=d[e]+W/2*t),m.push({operate:"L",position:P}),_={},Object(o["a"])(_,e,P[e]),Object(o["a"])(_,h,d[h]),P=_,m.push({operate:"L",position:P}),m.push({operate:"L",position:Object(s["a"])({},d)})}return m},diffAxis:function(){var e,t,n,i=this.startDirection,r=i.axis,a=i.sign,c=this.endDirection,u=c.axis,d=c.sign;"y"===r&&(a=-a,d=-d);var h=this.nodeCalcMessage(),f=this.configure.safeDistance,l=this.startNode;l.size.x=l.size.width,l.size.y=l.size.height;var p=this.endNode;p.size.x=p.size.width,p.size.y=p.size.height;var m,g,v=this.startPosition,y=this.endPosition,b=[{operate:"M",position:Object(s["a"])({},v)}];if(Math.sign(y[r]-v[r])===a&&Math.sign(y[u]-v[u])===-d)return b.push({operate:"L",position:(m={},Object(o["a"])(m,r,y[r]),Object(o["a"])(m,u,v[u]),m)},{operate:"L",position:(g={},Object(o["a"])(g,r,y[r]),Object(o["a"])(g,u,y[u]),g)}),b;var x=a>0?p.position[r]-v[r]:v[r]-(p.position[r]+p.size[r]);if(x>0&&Math.sign(y[u]-v[u])===d){var w,O,k,j=(w={},Object(o["a"])(w,r,0),Object(o["a"])(w,u,v[u]),w);return Math.abs(x)<f?j[r]=v[r]+x/2*a:j[r]=v[r]+f*a,b.push({operate:"L",position:j}),O={},Object(o["a"])(O,r,j[r]),Object(o["a"])(O,u,y[u]+f*d),j=O,b.push({operate:"L",position:j},{operate:"L",position:(k={},Object(o["a"])(k,r,y[r]),Object(o["a"])(k,u,j[u]),k)},{operate:"L",position:Object(s["a"])({},y)}),b}var S=d>0?l.position[u]-(p.position[u]+p.size[u]):y[u]-(l.position[u]+l.size[u]),z=a>0?y[r]-v[r]:v[r]-y[r];if(z<=0&&S>0){var L,E,N,M=(L={},Object(o["a"])(L,r,v[r]+f*a),Object(o["a"])(L,u,v[u]),L);return b.push({operate:"L",position:M}),E={},Object(o["a"])(E,r,M[r]),Object(o["a"])(E,u,(d>0?l.position[u]:l.position[u]+l.size[u])-S/2*d),M=E,b.push({operate:"L",position:M},{operate:"L",position:(N={},Object(o["a"])(N,r,y[r]),Object(o["a"])(N,u,M[u]),N)},{operate:"L",position:Object(s["a"])({},y)}),b}var $=(e={},Object(o["a"])(e,r,h[a>0?"max":"min"][r]+f*a),Object(o["a"])(e,u,v[u]),e);return b.push({operate:"L",position:$}),t={},Object(o["a"])(t,r,$[r]),Object(o["a"])(t,u,h[d>0?"max":"min"][u]+f*d),$=t,b.push({operate:"L",position:$}),n={},Object(o["a"])(n,r,y[r]),Object(o["a"])(n,u,$[u]),$=n,b.push({operate:"L",position:$},{operate:"L",position:Object(s["a"])({},y)}),b},lineShapeToD:function(e){var t="";return e.forEach((function(e){t+="".concat(e.operate," ").concat(e.position.x," ").concat(e.position.y)})),t}},watch:{direction:{handler:function(){this.calcDirection()},immediate:!0}}},u=c,d=n("2877"),h=Object(d["a"])(u,i,r,!1,null,"0f1d632c",null);t["default"]=h.exports},"0275":function(e,t,n){var i={"./circleShape.vue":"1aa7","./rectShape.vue":"bbbc"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="0275"},"0865":function(e,t,n){"use strict";n("7461")},"0af7":function(e,t,n){var i={"./arrowWidget.vue":"61d4","./textWidget.vue":"e0bd"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="0af7"},"0dd3":function(e,t,n){},1293:function(e,t,n){"use strict";n("0dd3")},"18eb":function(e,t,n){},"1aa7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.size.width/2+", "+e.size.height/2+")"}}),e.cssStyle.backgroundImage?n("image",{attrs:{width:e.size.width,height:e.size.height,href:e.cssStyle.backgroundImage}}):e._e()])},r=[],o={name:"circleShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2,backgroundImage:""}}}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2}}},s=o,a=n("2877"),c=Object(a["a"])(s,i,r,!1,null,"687eb1bb",null);t["default"]=c.exports},2142:function(e,t,n){var i={"./circleConnector.vue":"3c6e"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="2142"},"22b5":function(e,t,n){"use strict";n("51ab")},2395:function(e,t,n){},2919:function(e,t,n){},"2ddf":function(e,t,n){"use strict";n("18eb")},"3c6e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.position.x+", "+e.position.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},mouseup:e.mouseup}})},r=[],o=n("5530"),s={computed:{point:function(){return{x:this.node.position.x+this.position.x,y:this.node.position.y+this.position.y}}},methods:{mousedown:function(){this.$store.commit("connect/applyDefaultLineStructure",this.$parent.line),this.$store.commit("connect/start",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})},mouseup:function(){console.log(this.node.id,this.interface),this.$store.commit("connect/finish",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})}}},a={name:"cricleShape",mixins:[s],props:{node:{type:Object,default:function(){return{id:"",position:{x:0,y:0},size:{width:50,height:50}}},required:!0},interface:{type:String,default:""},direction:{type:Object,default:function(){return{x:0,y:0}}},translate:{type:Object,default:function(){return{x:.5,y:.5}}},offset:{type:Object,default:function(){return{x:0,y:0}}},size:{type:Object,default:function(){return{width:10,height:10}}},configure:{type:Object,default:function(){return{}}},cssStyle:{type:Object,default:function(){return{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}}}},data:function(){return{}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2},position:function(){var e=this.node;return{x:e.size.width*this.translate.x+this.offset.x,y:e.size.height*this.translate.y+this.offset.y}}},created:function(){}},c=a,u=n("2877"),d=Object(u["a"])(c,i,r,!1,null,"56e31581",null);t["default"]=d.exports},"50de":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("foreignObject",{attrs:{width:e.size.width,height:e.size.height}},[n("div",{staticClass:"from-box"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"mask",on:{dblclick:function(){e.edit=!0}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.configure.value,expression:"configure.value"}],style:e.cssStyle,attrs:{placeholder:e.configure.placeholder},domProps:{value:e.configure.value},on:{blur:function(){e.edit=!1},input:function(t){t.target.composing||e.$set(e.configure,"value",t.target.value)}}})])])},r=[],o={name:"textArea",props:{size:{type:Object,required:!0},configure:{type:Object,default:function(){return{value:"",placeholder:"请输入文字"}}},cssStyle:{type:Object,default:function(){return{width:"100%",height:"100%",border:"0",color:"black",fontSize:"12px",padding:"0"}}}},data:function(){return{edit:!1}}},s=o,a=(n("71d7"),n("2877")),c=Object(a["a"])(s,i,r,!1,null,"14e9b29e",null);t["default"]=c.exports},"51ab":function(e,t,n){},5364:function(e,t,n){},"551c":function(e,t,n){var i={"./brokenShape.vue":"0166","./linearShape.vue":"e1d2"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="551c"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=n("5c96"),o=n.n(r),s=(n("0fae"),n("5364"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"top-nav"}),n("div",{staticClass:"container-main"},[n("div",{staticClass:"object-part"},[n("object-view")],1),n("div",{staticClass:"canvas-part"},[n("canvas-view")],1),n("div",{staticClass:"function-part"},[n("function-view")],1)])])}),a=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"canvasView-container"},[n("svg",{ref:"svgCanvas",staticClass:"svg-container",attrs:{width:e.width,height:e.height},on:{mousemove:e.mousemove}},[e._l(e.lines,(function(t){return n(t.component,e._b({key:t.id,tag:"connect-line"},"connect-line",t,!1))})),e._l(e.nodes,(function(t){return n("node",e._b({key:t.id,ref:"node",refInFor:!0},"node",t,!1))})),e.dev?n("transfrom-controls",{ref:"transformControls",attrs:{show:e.transformControls.show,target:e.transformControls}}):e._e(),e.dev?n("selection-box"):e._e()],2),e.dev?n("svg",{staticClass:"svg-helper",attrs:{width:e.width,height:e.height}}):e._e()])},u=[],d=(n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{style:e.svgStyle,attrs:{width:e.end.x-e.start.x,height:e.end.y-e.start.y,transform:"translate("+e.start.x+", "+e.start.y+")"}})}),h=[],f=(n("6062"),n("3ca3"),n("ddb0"),{props:{selection:{type:Object,default:function(){}},start:{type:Object,default:function(){return{x:0,y:0}}},end:{type:Object,default:function(){return{x:0,y:0}}}},data:function(){return{intersection:new Set,svgStyle:{fill:"rgba(0, 0, 200, 0.2)",strokeWidth:1,stroke:"blue"}}},methods:{getIntersection:function(){return this.intersection},intersectObject:function(){}}}),l=f,p=n("2877"),m=Object(p["a"])(l,d,h,!1,null,"59bcb76b",null),g=m.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("rect",{staticStyle:{cursor:"nw-resize"},style:e.scaleNode.style,attrs:{width:e.scaleNode.width,height:e.scaleNode.height,transform:"translate("+e.leftTop.x+", "+e.leftTop.y+")"}}),n("rect",{staticStyle:{cursor:"ne-resize"},style:e.scaleNode.style,attrs:{width:e.scaleNode.width,height:e.scaleNode.height,transform:"translate("+e.rightBottom.x+", "+e.leftTop.y+")"}}),n("rect",{staticStyle:{cursor:"se-resize"},style:e.scaleNode.style,attrs:{width:e.scaleNode.width,height:e.scaleNode.height,transform:"translate("+e.rightBottom.x+", "+e.rightBottom.y+")"}}),n("rect",{staticStyle:{cursor:"sw-resize"},style:e.scaleNode.style,attrs:{width:e.scaleNode.width,height:e.scaleNode.height,transform:"translate("+e.leftTop.x+", "+e.rightBottom.y+")"}})])},y=[],b=(n("18a5"),{props:{show:{type:Boolean,default:!0},target:{type:Object,default:function(){return{translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}}}},data:function(){return{scaleNode:{width:10,height:10,style:{stroke:"#0F9BFF",strokeWidth:1,fill:"white",shapeRendering:"crispEdges"}},maskStyle:{stroke:"#1584FC",strokeWidth:2,fill:"transparent",cursor:"move"},dragging:!1,changed:!1}},computed:{position:function(){return{x:this.target.translate.x-this.target.anchor.x,y:this.target.translate.y-this.target.anchor.y}},halfScaleNodeSize:function(){return{width:this.scaleNode.width/2,height:this.scaleNode.height/2}},leftTop:function(){return{x:this.position.x-this.halfScaleNodeSize.width,y:this.position.y-this.halfScaleNodeSize.height}},rightBottom:function(){return{x:this.position.x-this.halfScaleNodeSize.width+this.target.size.width,y:this.position.y-this.halfScaleNodeSize.height+this.target.size.height}},canvas:function(){return this.$store.getters["canvas/canvas"]}},methods:{MaskHandler:function(){var e=this;this.dragging=!0,this.changed=!0;var t=function(t){e.target.translate.x=t.offsetX,e.target.translate.y=t.offsetY},n=function(){e.dragging=!1,e.canvas.removeEventListener("mousemove",t),document.body.removeEventListener("mouseup",t)};this.canvas.addEventListener("mousemove",t),document.body.addEventListener("mouseup",n)}}}),x=b,w=Object(p["a"])(x,v,y,!1,null,"a1ab8068",null),O=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"vis-node",class:{"connector-hover":e.configure.connector.hover&&!e.dragging},attrs:{tabindex:"0",width:e.size.width,height:e.size.height,transform:"translate("+e.position.x+", "+e.position.y+")rotate("+e.rotate+", "+e.anchor.x+" "+e.anchor.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},dblclick:e.dblclick}},[n(e.framework.shape,e._b({tag:"component",attrs:{size:e.size}},"component",e.shape,!1)),e.configure.backgroundImage?n("image",{attrs:{width:e.size.width,height:e.size.height,href:e.configure.backgroundImage}}):e._e(),n(e.framework.widget,e._b({tag:"component",attrs:{size:e.size}},"component",e.widget,!1)),e._l(e.connector,(function(t){return n(t.component,e._b({key:t.interface,ref:t.interface,refInFor:!0,tag:"component",class:{"connector-transparent":e.configure.connector.hover},attrs:{node:{id:e.id,position:e.position,size:e.size}}},"component",t,!1))}))],2)},j=[],S=n("5530"),z=(n("a9e3"),{props:{id:{type:String,default:""},use:{type:String,default:"work"}}}),L={props:{translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}}},data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(e){e.stopPropagation()},i=function(t){t.stopPropagation(),e.$store.commit("active/setNode",e.id),e.$store.commit("controls/transformNode",e.id)},r=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},o=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(o.addEventListener("mouseenter",t),o.addEventListener("mouseleave",n),o.addEventListener("click",i),o.addEventListener("keyup",r)):(o.removeEventListener("mouseenter",t),o.removeEventListener("mouseleave",n),o.removeEventListener("click",i),o.removeEventListener("keyup",r))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},E={data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(t){t.stopPropagation(),e.$store.commit("controls/transformNode",e.id),e.$store.commit("active/setNode",e.id)},i=function(e){e.stopPropagation()},r=function(e){e.stopPropagation()},o=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},s=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(s.addEventListener("mouseenter",t),s.addEventListener("mouseleave",i),s.addEventListener("mousedown",n),s.addEventListener("click",r),s.addEventListener("keyup",o)):(s.removeEventListener("mouseenter",t),s.removeEventListener("mouseleave",i),s.removeEventListener("mousedown",n),s.removeEventListener("click",r),s.removeEventListener("keyup",o))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},N=(n("ac1f"),n("5319"),n("0275")),M={};N.keys().forEach((function(e){M[e.replace(/.\/|\.vue$/g,"")]=N(e).default}));var $=n("2142"),_={};$.keys().forEach((function(e){_[e.replace(/.\/|\.vue$/g,"")]=$(e).default}));var P=n("b256"),C={};P.keys().forEach((function(e){C[e.replace(/.\/|\.vue$/g,"")]=P(e).default}));var W={name:"node",mixins:[z,L,E],components:Object(S["a"])(Object(S["a"])(Object(S["a"])({},M),_),C),props:{framework:{type:Object,default:function(){return{shape:"rectShape",widget:"",connector:"single"}}},translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}},configure:{type:Object,default:function(){return{connector:{hover:!0},backgroundImage:""}}},widget:{type:Object},shape:{type:Object},connector:{type:Array},line:{type:Object,default:function(){return{framework:{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{},connective:{}}}}},data:function(){return{dragging:!1,edit:!1,dragStartPointer:{x:0,y:0},cacheTranslate:{x:0,y:0}}},computed:{position:function(){return{x:this.translate.x-this.anchor.x,y:this.translate.y-this.anchor.y}},canvas:function(){return this.$store.getters["canvas/canvas"]},dev:function(){return"dev"===this.$store.getters.mode}},methods:{dblclick:function(){var e=this;this.edit=!0;var t=function t(){e.edit=!1,document.body.removeEventListener("mousedown",t)};document.body.addEventListener("mousedown",t)},mousedown:function(e){var t=this;if(this.edit)return!1;this.dragging=!0;var n=this.dragStartPointer,i=this.cacheTranslate,r=this.translate,o=this.canvas;i.x=this.translate.x,i.y=this.translate.y,n.x=e.clientX,n.y=e.clientY;var s=function(e){r.x=i.x+e.clientX-n.x,r.y=i.y+e.clientY-n.y},a=function e(){t.dragging=!1,o.removeEventListener("mousemove",s),o.removeEventListener("mouseup",e)};o.addEventListener("mousemove",s),o.addEventListener("mouseup",a)}}},D=W,T=(n("2ddf"),Object(p["a"])(D,k,j,!1,null,"45bd1442",null)),F=T.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("circle",{staticClass:"connectLine",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.startNode.x+", "+e.startNode.y+")"},on:{mousedown:function(t){return e.mousedown("start")}}}),n("defs",[n(e.framework.markerStart,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerStart,!1)),n(e.framework.markerMid,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerMid,!1)),n(e.framework.markerEnd,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerEnd,!1))],1),n(e.framework.shape,e._b({tag:"component",attrs:{markerStart:""+e.id+e.framework.markerStart,markerMid:""+e.id+e.framework.markerMid,markerEnd:""+e.id+e.framework.markerEnd,startPosition:e.startPosition,endPosition:e.endPosition,startMessage:e.start,endMessage:e.end}},"component",e.shape,!1)),n("circle",{staticClass:"connectLine",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.endNode.x+", "+e.endNode.y+")"},on:{mousedown:function(t){return e.mousedown("end")}}})],1)},q=[],B=n("551c"),A={};B.keys().forEach((function(e){A[e.replace(/.\/|\.vue$/g,"")]=B(e).default}));var U=n("0af7"),I={};U.keys().forEach((function(e){I[e.replace(/.\/|\.vue$/g,"")]=U(e).default}));var X={name:"connectLine",mixins:[z],components:Object(S["a"])(Object(S["a"])({},A),I),props:{framework:{type:Object,default:function(){return{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrow"}}},start:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},end:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},shape:{type:Object,required:!0},markerStart:{type:Object},markerMid:{type:Object},markerEnd:{type:Object}},data:function(){return{point:{r:10,style:{fill:"white",stroke:"green",strokeWidth:1,cursor:"move"}},startPosition:{x:0,y:0},endPosition:{x:0,y:0}}},computed:{startNode:function(){var e=this.$store.getters["component/getNode"](this.start.node);return e&&e.$refs[this.start.interface][0]?e.$refs[this.start.interface][0].point:this.start.position},endNode:function(){var e=this.$store.getters["component/getNode"](this.end.node);return e&&e.$refs[this.end.interface][0]?e.$refs[this.end.interface][0].point:this.end.position},canvas:function(){return this.$store.getters["canvas/canvas"]}},methods:{mousedown:function(e){console.log(this.id),this.$store.commit("connect/setFinishFlag",e);var t=this[e].position,n=this.canvas,i=function(e){t.x=e.offsetX,t.y=e.offsetY},r=function e(){n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",e)},o=function e(){var o=30,s=n.getBoundingClientRect();t.x<=0?t.x=o:t.x>=s.width-5&&(t.x=s.width-o),t.y<=0?t.y=o:t.y>=s.height-5&&(t.y=s.height-o),n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",r),n.removeEventListener("mouseleave",e)};n.addEventListener("mousemove",i),n.addEventListener("mouseup",r),n.addEventListener("mouseleave",o)}},watch:{startNode:{handler:function(e,t){e!==t&&(e!==this.start.position&&(this.start.position.x=e.x,this.start.position.y=e.y),this.startPosition=e)},immediate:!0},endNode:{handler:function(e,t){e!==t&&(e!==this.end.position&&(this.end.position.x=e.x,this.end.position.y=e.y),this.endPosition=e)},immediate:!0}}},Y=X,H=(n("8454"),Object(p["a"])(Y,J,q,!1,null,"5bfbdb8e",null)),R=H.exports,V={components:{selectionBox:g,transfromControls:O,node:F,connectLine:R},data:function(){return{width:0,height:0}},computed:{dev:function(){return"dev"===this.$store.getters.mode},nodes:function(){return this.$store.getters["structure/nodes"]},connectors:function(){return this.$store.getters["structure/connectors"]},lines:function(){return this.$store.getters["structure/lines"]},transformControls:function(){return this.$store.getters["controls/transform"]}},watch:{"$store.state.structure.nodes":function(e){var t=this;e&&this.$nextTick((function(){var e={},n=t.$refs.node;n.forEach((function(t){e[t.id]=t})),t.$store.commit("component/cacheNodes",e)}))}},methods:{mousemove:function(e){this.$store.commit("canvas/setPointer",{x:e.offsetX,y:e.offsetY})}},mounted:function(){var e=this,t=this.$refs.container;this.width=t.offsetWidth,this.height=t.offsetHeight;var n=this.$refs.svgCanvas;n.addEventListener("click",(function(){if(e.$refs.transformControls.changed)return e.$refs.transformControls.changed=!1,!1;e.$store.commit("controls/resetTransform"),e.$store.commit("active/clearNode")})),this.$store.commit("canvas/setCanvas",n)}},G=V,K=(n("22b5"),Object(p["a"])(G,c,u,!1,null,"1b05da9d",null)),Q=K.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objectView-container"},[n("el-collapse",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.themeMenu,(function(t){return n("el-collapse-item",{key:t.name,attrs:{title:t.label,name:t.name}},e._l(t.inventory,(function(t){return n("node-display-window",{key:t.name,attrs:{width:e.windowWidth,height:e.windowHeight,structure:t.structure}})})),1)})),1)],1)},ee=[],te=(n("d81d"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"display-window-container",style:{width:e.width+"px",height:e.height+"px"},on:{mousedown:function(t){return e.dragStart(t,e.structure)}}},[n("svg",{staticStyle:{"pointer-events":"none"},attrs:{width:e.width,height:e.height}},[n(e.structure.component,e._b({tag:"component",attrs:{use:"display",translate:e.displayPosition}},"component",e.structure,!1))],1)])}),ne=[],ie=(n("e9c4"),n("ec26")),re={components:{node:F},props:{width:{type:Number,default:50},height:{type:Number,default:50},structure:{type:Object}},data:function(){return{}},computed:{displayPosition:function(){return{x:this.width/2,y:this.height/2}},canvasPointer:function(){return this.$store.getters["canvas/pointer"]}},methods:{dragStart:function(e,t){var n=this,r=i["default"].observable(JSON.parse(JSON.stringify(t)));console.log(r),r.id=Object(ie["a"])(),r.translate.x=-100,r.translate.y=-100;var o=this.$store.getters["canvas/canvas"],s=function(){n.$store.commit("structure/addNode",r),n.$store.commit("active/setNode",r.id),n.$store.commit("controls/transformNode",r.id)},a=o.getBoundingClientRect().left,c=o.getBoundingClientRect().top,u=function(e){e.stopPropagation(),r.translate.x=e.clientX-a,r.translate.y=e.clientY-c},d=function e(){o.removeEventListener("mouseenter",s),o.removeEventListener("mousemove",u),document.body.removeEventListener("mouseup",e)};o.addEventListener("mouseenter",s),o.addEventListener("mousemove",u),document.body.addEventListener("mouseup",d)}},created:function(){}},oe=re,se=(n("d46f"),Object(p["a"])(oe,te,ne,!1,null,"d6e292da",null)),ae=se.exports,ce=n("7ce2"),ue=n.n(ce),de=function(){return{name:"basicLinear",label:"基础直线",desp:"干净的直线",structure:{framework:{shape:"linearShape",markerStart:"",markerMid:"",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}},he=function(){return{framework:{shape:"",widget:"",connector:1},size:{width:50,height:50},anchor:{x:25,y:25},configure:{connector:{hover:!0}},shape:{cssStyle:{fill:"#3875E8",stroke:"black",strokeWidth:2,backgroundImage:""}},widget:"",connector:[{interface:"p1",direction:{x:0,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:.5},offset:{x:0,y:0},cssStyle:{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}}],line:de().structure}},fe=[{name:"basicRect",label:"基础矩形",structure:{framework:{shape:"rectShape"}}},{name:"basicCircle",label:"基础圆形",structure:{framework:{shape:"circleShape"}}}],le=function(){return{name:"basicShape",label:"基础控件",desp:"形状与单节点",inventory:fe.map((function(e){return e.structure=ue()(he(),e.structure),e}))}},pe=function(){return{name:"basicBroken",label:"基础折线",desp:"干净的折线",structure:{framework:{shape:"brokenShape",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}},me=function(){return{framework:{shape:"",widget:"textArea",connector:"square"},size:{width:70,height:50},anchor:{x:35,y:25},configure:{connector:{hover:!1}},widget:{},shape:{cssStyle:{fill:"transparent",stroke:"black",strokeWidth:4,backgroundImage:""}},connector:[{interface:"p1",direction:{x:0,y:1},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:0},offset:{x:0,y:0},cssStyle:{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}},{interface:"p2",direction:{x:1,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:1,y:.5},offset:{x:0,y:0},cssStyle:{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}},{interface:"p3",direction:{x:0,y:-1},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:1},offset:{x:0,y:0},cssStyle:{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}},{interface:"p4",direction:{x:-1,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:0,y:.5},offset:{x:0,y:0},cssStyle:{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}}],line:pe().structure}},ge=[{name:"squareRect",label:"四方矩形",structure:{framework:{shape:"rectShape"}}},{name:"squareCircle",label:"四方圆形",structure:{framework:{shape:"circleShape"}}}],ve=function(){return{name:"squareText",label:"四方表单控件",desp:"形状表单与四方节点",inventory:ge.map((function(e){return e.structure=ue()(me(),e.structure),e}))}},ye=(n("b64b"),function(e){var t={},n=function(e){Object.keys(e).forEach((function(n){e[n].default&&(t[n]="function"===typeof e[n].default?e[n].default():e[n].default)}))};return e.mixins&&e.mixins.length&&e.mixins.forEach((function(e){e.props&&n(e.props)})),e.props&&n(e.props),e.name?t.component=e.name:console.error("component must hava a name"),t}),be=function(e){var t=ue()({},ye(R),e),n=t.framework;return n.shape&&A[n.shape]&&(t.shape=ue()(ye(A[n.shape]),t.shape)),n.markerStart&&I[n.markerStart]&&(t.markerStart=ue()(ye(I[n.markerStart]),t.markerStart)),n.markerMid&&I[n.markerMid]&&(t.markerMid=ue()(ye(I[n.markerMid]),t.markerMid)),n.markerEnd&&I[n.markerEnd]&&(t.markerEnd=ue()(ye(I[n.markerEnd]),t.markerEnd)),t},xe=function(e){return Object.assign({},e,{structure:be(e.structure)})},we=[xe(de()),xe(pe())];console.log(we);var Oe=function(e){var t=ue()({},ye(F),e),n=t.framework;return n.shape&&M[n.shape]?t.shape=ue()(ye(M[n.shape]),t.shape):t.shape={},n.widget&&C[n.widget]?t.widget=ue()(ye(C[n.widget]),t.widget):t.widget={},n.connector&&Array.isArray(t.connector)?t.connector.forEach((function(e){_[e.component]&&(e=ue()(e,ye(_[e.component])))})):t.connector=[],t.line?t.line=be(t.line):t.line={},JSON.parse(JSON.stringify(t))},ke=function(e){return e.inventory.forEach((function(e){e.structure=Oe(e.structure)})),JSON.parse(JSON.stringify(e))},je=[ke(le()),ke(ve())];console.log(je);var Se={components:{nodeDisplayWindow:ae},data:function(){var e=je.map((function(e){return e.name}));return{active:e,windowWidth:100,windowHeight:80,themeMenu:je}},methods:{}},ze=Se,Le=(n("1293"),Object(p["a"])(ze,Z,ee,!1,null,"ffcc0d50",null)),Ee=Le.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"functionView-container"})},Me=[],$e={components:{},data:function(){return{active:["connector"],windowWidth:100,windowHeight:80}},computed:{avtiveNode:function(){return this.$store.getters["active/node"]}},methods:{}},_e=$e,Pe=(n("0865"),Object(p["a"])(_e,Ne,Me,!1,null,"eddbbba4",null)),Ce=Pe.exports,We={components:{canvasView:Q,objectView:Ee,functionView:Ce},data:function(){return{key:""}}},De=We,Te=(n("7c55"),Object(p["a"])(De,s,a,!1,null,null,null)),Fe=Te.exports,Je=n("2f62"),qe={namespaced:!0,state:{nodes:{},lines:{}},getters:{nodes:function(e){return e.nodes},lines:function(e){return e.lines},getNode:function(e){return function(t){return e.nodes[t]}},getLine:function(e){return function(t){return e.lines[t]}}},mutations:{addNode:function(e,t){e.nodes[t.id]=i["default"].observable(t),e.nodes.__ob__.dep.notify()},deleteNode:function(e,t){i["default"].delete(e.nodes,t)},addLine:function(e,t){e.lines[t.id]=i["default"].observable(t),e.lines.__ob__.dep.notify()},deleteLine:function(e,t){var n=e.lines[t];if(!n)return console.error("can not get this line id: '".concat(t,"'")),!1;if(n.start.node){var r=e.nodes[n.start.node];r&&(r.line.connective[n.id]?delete r.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}if(n.end.node){var o=e.nodes[n.end.node];o&&(o.line.connective[n.id]?delete o.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}i["default"].delete(e.lines,t)}},actions:{}},Be={namespaced:!0,state:{pointer:{x:0,y:0},canvas:null},getters:{pointer:function(e){return e.pointer},canvas:function(e){return e.canvas}},mutations:{setPointer:function(e,t){e.pointer=t},setCanvas:function(e,t){e.canvas=t}},actions:{}},Ae={namespaced:!0,state:{node:"",line:""},getters:{node:function(e){return e.node},line:function(e){return e.line}},mutations:{setNode:function(e,t){var n=this.getters["structure/getNode"](t);e.node=n},clearNode:function(e){e.node=""},setLine:function(e,t){var n=this.getters["structure/getLine"](t);e.line=n},clearLine:function(e){e.line=""}},actions:{}},Ue={namespaced:!0,state:{transform:{show:!1,translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}},getters:{transform:function(e){return e.transform}},mutations:{setTransform:function(e,t){var n=t.key,i=t.value;void 0!==e.transform[n]&&(e.transform[n]=i)},transformNode:function(e,t){var n=this.getters["structure/getNode"](t);e.transform.translate=n.translate,e.transform.scale=n.scale,e.transform.rotate=n.rotate,e.transform.anchor=n.anchor,e.transform.size=n.size,e.transform.show=!0},resetTransform:function(e){e.transform={show:!1,translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}}},actions:{}},Ie={namespaced:!0,state:{nodes:{}},getters:{getNode:function(e){return function(t){return e.nodes[t]}}},mutations:{cacheNodes:function(e,t){e.nodes=t}},actions:{}},Xe={namespaced:!0,state:{defaultLineStructure:we[0].structure,finishFlag:""},getters:{},mutations:{applyDefaultLineStructure:function(e,t){e.defaultLineStructure=JSON.parse(JSON.stringify(t))},start:function(e,t){var n=this,i=JSON.parse(JSON.stringify(e.defaultLineStructure));i.id=Object(ie["a"])(),i.start=Object(S["a"])({},t),i.end.position=Object(S["a"])({},i.start.position);var r=this.getters["component/getNode"](i.start.node);r.line.connective[i.id]="start",e.finishFlag="end",this.commit("structure/addLine",i),this.commit("active/setLine",i.id);var o=this.getters["canvas/canvas"],s=i.end.position,a=function(e){s.x=e.offsetX,s.y=e.offsetY},c=function e(){n.commit("structure/deleteLine",i.id),o.removeEventListener("mousemove",a),o.removeEventListener("mouseleave",e)},u=function e(){o.removeEventListener("mousemove",a),o.removeEventListener("mouseleave",c),o.removeEventListener("mouseup",e)};o.addEventListener("mousemove",a),o.addEventListener("mouseleave",c),o.addEventListener("mouseup",u)},finish:function(e,t){var n=this.getters["active/line"];if(!n)return!1;if(n.start.node&&t.node===n.start.node){var i=n.start.position,o=n.end.position,s=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2));return s<5&&this.commit("structure/deleteLine",n.id),r["Message"].warning("节点不能链接本身！"),!1}Object.assign(n.end,t),console.log(n);var a=this.getters["component/getNode"](n.end.node);a.line.connective[n.id]=e.finishFlag},setFinishFlag:function(e,t){e.finishFlag=t}},actions:{}};i["default"].use(Je["a"]);var Ye=new Je["a"].Store({state:{mode:"dev"},getters:{mode:function(e){return e.mode}},mutations:{setMode:function(e,t){e.mode=t}},actions:{},modules:{canvas:Be,structure:qe,controls:Ue,active:Ae,component:Ie,connect:Xe}});i["default"].use(o.a),i["default"].config.productionTip=!1,new i["default"]({store:Ye,render:function(e){return e(Fe)}}).$mount("#app")},"61d4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"arrowWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:"0 0 "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"auto"}},[n("path",{style:e.cssStyle,attrs:{d:"M2,2 L10,6 L2,10 L6,6 L2,2"}})])},r=[],o={name:"arrowWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{r:5,size:{width:12,height:12},ref:{x:30,y:6}}}},cssStyle:{type:Object,default:function(){return{fill:"black",stroke:"",strokeWidth:1,cursor:"crosshair"}}}}},s=o,a=n("2877"),c=Object(a["a"])(s,i,r,!1,null,"b045ca52",null);t["default"]=c.exports},"71d7":function(e,t,n){"use strict";n("e763")},7461:function(e,t,n){},"7c55":function(e,t,n){"use strict";n("2395")},8454:function(e,t,n){"use strict";n("e302")},b256:function(e,t,n){var i={"./textArea.vue":"50de"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="b256"},b514:function(e,t,n){"use strict";t["a"]={props:{startPosition:{type:Object,required:!0},endPosition:{type:Object,required:!0},startMessage:{type:Object,required:!0},endMessage:{type:Object,required:!0},markerStart:{type:String},markerMid:{type:String},markerEnd:{type:String}}}},bbbc:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("rect",{style:e.cssStyle,attrs:{width:e.size.width,height:e.size.height}})])},r=[],o={name:"rectShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2,backgroundImage:""}}}},created:function(){}},s=o,a=n("2877"),c=Object(a["a"])(s,i,r,!1,null,"94453fd8",null);t["default"]=c.exports},d46f:function(e,t,n){"use strict";n("2919")},e0bd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"textWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:-e.configure.size.width/2+" "+-e.configure.size.height/2+" "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"0"}},[n("rect",{style:e.shapeStyle,attrs:{width:e.configure.size.width,height:e.configure.size.height,transform:"translate("+-e.configure.size.width/2+", "+-e.configure.size.height/2+")"}}),n("text",{style:e.textStyle,attrs:{x:-e.configure.textLength/2,y:parseInt(e.cssStyle.fontSize)/2,"font-size":e.cssStyle.fontSize,textLength:e.configure.textLength}},[e._v(e._s(e.configure.value))])])},r=[],o=(n("cb29"),{name:"textWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{size:{width:54,height:18},ref:{x:0,y:0},value:"一段文本",textLength:50}}},cssStyle:{type:Object,default:function(){return{color:"white",fontSize:"14px",fill:"#0FECB6",stroke:"black",strokeWidth:0,padding:2}}}},computed:{textStyle:function(){var e=this.cssStyle;return{fill:e.color,fontSize:e.fontSize}},shapeStyle:function(){var e=this.cssStyle;return{fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth}}}}),s=o,a=n("2877"),c=Object(a["a"])(s,i,r,!1,null,"1319a342",null);t["default"]=c.exports},e1d2:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("path",{style:e.cssStyle,attrs:{d:"M "+e.startPosition.x+" "+e.startPosition.y+" L "+e.middlePoint.x+" "+e.middlePoint.y+" L "+e.endPosition.x+" "+e.endPosition.y+" ","marker-start":"url(#"+e.markerStart+")","marker-mid":"url(#"+e.markerMid+")","marker-end":"url(#"+e.markerEnd+")"}})},r=[],o=n("b514"),s={name:"linear",mixins:[o["a"]],props:{cssStyle:{type:Object,default:function(){return{fill:"transparent",stroke:"#2856FF",strokeWidth:1}}}},computed:{middlePoint:function(){return{x:(this.endPosition.x-this.startPosition.x)/2+this.startPosition.x,y:(this.endPosition.y-this.startPosition.y)/2+this.startPosition.y}}}},a=s,c=n("2877"),u=Object(c["a"])(a,i,r,!1,null,"208c79fd",null);t["default"]=u.exports},e302:function(e,t,n){},e763:function(e,t,n){}});