(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4ba8fba"],{"0275":function(e,t,n){var r={"./circleShape.vue":"1aa7","./rectShape.vue":"bbbc"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="0275"},"167d":function(e,t,n){"use strict";n("8aab")},"1aa7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.size.width/2+", "+e.size.height/2+")"}})},i=[],o={name:"circleShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2}}}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2}}},c=o,a=n("2877"),s=Object(a["a"])(c,r,i,!1,null,"7c51f50a",null);t["default"]=s.exports},2142:function(e,t,n){var r={"./circleConnector.vue":"3c6e"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="2142"},"2a16":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("0275"),i={};r.keys().forEach((function(e){i[e.replace(/.\/|\.vue$/g,"")]=r(e).default}))},3916:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("foreignObject",{attrs:{width:e.size.width,height:e.size.height}},[n("div",{staticClass:"from-box"},[e.edit?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.configure.value,expression:"configure.value"}],style:e.cssStyle,attrs:{placeholder:e.configure.placeholder},domProps:{value:e.configure.value},on:{blur:function(){e.edit=!1},input:function(t){t.target.composing||e.$set(e.configure,"value",t.target.value)}}}):n("div",{staticClass:"display",style:e.cssStyle,domProps:{textContent:e._s(e.configure.value||e.configure.placeholder)},on:{dblclick:function(){e.edit=!0}}})])])},i=[],o={name:"textAreaWidget",props:{size:{type:Object,required:!0},configure:{type:Object,default:function(){return{value:"",placeholder:"双击输入"}}},cssStyle:{type:Object,default:function(){return{width:"100%",height:"100%",border:"0",color:"black",fontSize:"12px",padding:"0"}}}},data:function(){return{edit:!1}}},c=o,a=(n("167d"),n("2877")),s=Object(a["a"])(c,r,i,!1,null,"3c9798be",null);t["default"]=s.exports},"3c6e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.position.x+", "+e.position.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},mouseup:e.mouseup}})},i=[],o=n("5530"),c={computed:{point:function(){return{x:this.node.position.x+this.position.x,y:this.node.position.y+this.position.y}}},methods:{mousedown:function(e){this.$store.commit("connect/applyDefaultLineStructure",this.$parent.line),this.$store.commit("connect/setDragStartPointer",{x:e.clientX,y:e.clientY}),this.$store.commit("connect/start",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})},mouseup:function(){this.$store.commit("connect/finish",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})}}},a={name:"cricleShape",mixins:[c],props:{node:{type:Object,default:function(){return{id:"",position:{x:0,y:0},size:{width:50,height:50}}},required:!0},interface:{type:String,default:""},direction:{type:Object,default:function(){return{x:0,y:0}}},translate:{type:Object,default:function(){return{x:.5,y:.5}}},offset:{type:Object,default:function(){return{x:0,y:0}}},size:{type:Object,default:function(){return{width:10,height:10}}},configure:{type:Object,default:function(){return{}}},cssStyle:{type:Object,default:function(){return{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}}}},data:function(){return{}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2},position:function(){var e=this.node;return{x:e.size.width*this.translate.x+this.offset.x,y:e.size.height*this.translate.y+this.offset.y}}},created:function(){}},s=a,u=n("2877"),d=Object(u["a"])(s,r,i,!1,null,"56e31581",null);t["default"]=d.exports},"3e76":function(e,t,n){},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"40a7":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("b256"),i={};r.keys().forEach((function(e){i[e.replace(/.\/|\.vue$/g,"")]=r(e).default}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),c=n("5899"),a=r("".replace),s="["+c+"]",u=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),f=function(e){return function(t){var n=o(i(t));return 1&e&&(n=a(n,u,"")),2&e&&(n=a(n,d,"")),n}};e.exports={start:f(1),end:f(2),trim:f(3)}},7156:function(e,t,n){var r=n("1626"),i=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var c,a;return o&&r(c=t.constructor)&&c!==n&&i(a=c.prototype)&&a!==n.prototype&&o(e,a),e}},"8aab":function(e,t,n){},"9cc8":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("2142"),i={};r.keys().forEach((function(e){i[e.replace(/.\/|\.vue$/g,"")]=r(e).default}))},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("e330"),c=n("94ca"),a=n("6eeb"),s=n("1a2d"),u=n("7156"),d=n("3a9b"),f=n("d9b5"),l=n("c04e"),h=n("d039"),p=n("241c").f,m=n("06cf").f,v=n("9bf2").f,b=n("408a"),g=n("58a8").trim,y="Number",w=i[y],x=w.prototype,E=i.TypeError,k=o("".slice),O=o("".charCodeAt),$=function(e){var t=l(e,"number");return"bigint"==typeof t?t:j(t)},j=function(e){var t,n,r,i,o,c,a,s,u=l(e,"number");if(f(u))throw E("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=g(u),t=O(u,0),43===t||45===t){if(n=O(u,2),88===n||120===n)return NaN}else if(48===t){switch(O(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=k(u,2),c=o.length,a=0;a<c;a++)if(s=O(o,a),s<48||s>i)return NaN;return parseInt(o,r)}return+u};if(c(y,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var N,z=function(e){var t=arguments.length<1?0:w($(e)),n=this;return d(x,n)&&h((function(){b(n)}))?u(Object(t),n,z):t},L=r?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),_=0;L.length>_;_++)s(w,N=L[_])&&!s(z,N)&&v(z,N,m(w,N));z.prototype=x,x.constructor=z,a(i,y,z)}},b256:function(e,t,n){var r={"./textAreaWidget.vue":"3916"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="b256"},b88b:function(e,t,n){"use strict";n("3e76")},bbbc:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{style:e.cssStyle,attrs:{width:e.size.width,height:e.size.height}})},i=[],o={name:"rectShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2}}}},created:function(){}},c=o,a=n("2877"),s=Object(a["a"])(c,r,i,!1,null,"1e355182",null);t["default"]=s.exports},ecce:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"vis-node",class:{"connector-hover":e.configure.connector.hover&&!e.dragging,"vis-node-acitve":e.active,"vis-node-edit":e.edit},attrs:{tabindex:"0",width:e.size.width,height:e.size.height,transform:"translate("+e.position.x+", "+e.position.y+")rotate("+e.rotate+", "+e.anchor.x+" "+e.anchor.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},dblclick:e.dblclick}},[n(e.framework.shape,e._b({tag:"component",attrs:{size:e.size}},"component",e.shape,!1)),e.configure.backgroundImage?n("image",{attrs:{width:e.size.width,height:e.size.height,href:e.configure.backgroundImage}}):e._e(),e.configure.icon?n("g",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{width:e.size.width,height:e.size.height,"xlink:href":e.configure.icon}})]):e._e(),n(e.framework.widget,e._b({tag:"component",attrs:{size:e.size}},"component",e.widget,!1)),e._l(e.connector,(function(t){return n(t.component,e._b({key:t.interface,ref:t.interface,refInFor:!0,tag:"component",class:{"connector-transparent":e.configure.connector.hover},attrs:{node:{id:e.id,position:e.position,size:e.size}}},"component",t,!1))}))],2)},i=[],o=n("5530"),c=(n("a9e3"),n("18a5"),n("2721")),a={props:{translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}}},data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(e){e.stopPropagation()},r=function(t){t.stopPropagation(),e.$store.commit("active/setNode",e.id),e.$store.commit("controls/transformNode",e.id)},i=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},o=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(o.addEventListener("mouseenter",t),o.addEventListener("mouseleave",n),o.addEventListener("click",r),o.addEventListener("keyup",i)):(o.removeEventListener("mouseenter",t),o.removeEventListener("mouseleave",n),o.removeEventListener("click",r),o.removeEventListener("keyup",i))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},s={data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(e){e.stopPropagation()},r=function(e){e.stopPropagation()},i=function(e){e.stopPropagation()},o=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},c=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(c.addEventListener("mouseenter",t),c.addEventListener("mouseleave",r),c.addEventListener("mousedown",n),c.addEventListener("click",i),c.addEventListener("keyup",o)):(c.removeEventListener("mouseenter",t),c.removeEventListener("mouseleave",r),c.removeEventListener("mousedown",n),c.removeEventListener("click",i),c.removeEventListener("keyup",o))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},u=n("2a16"),d=n("9cc8"),f=n("40a7"),l={name:"node",mixins:[c["a"],a,s],components:Object(o["a"])(Object(o["a"])(Object(o["a"])({},u["a"]),d["a"]),f["a"]),props:{framework:{type:Object,default:function(){return{shape:"rectShape",widget:"",connector:"single"}}},translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}},configure:{type:Object,default:function(){return{connector:{hover:!0},backgroundImage:"",icon:""}}},widget:{type:Object},shape:{type:Object},connector:{type:Array},line:{type:Object,default:function(){return{framework:{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{},connective:{}}}}},data:function(){return{dragging:!1,edit:!1,dragStartPointer:{x:0,y:0},cacheTranslate:{x:0,y:0}}},computed:{position:function(){return{x:this.translate.x-this.anchor.x,y:this.translate.y-this.anchor.y}},canvas:function(){return this.$store.getters["canvas/canvas"]},active:function(){return this.$store.getters["active/node"].id===this.id}},methods:{dblclick:function(){var e=this;this.edit=!0;var t=function t(){e.edit=!1,document.body.removeEventListener("mousedown",t)};document.body.addEventListener("mousedown",t)},mousedown:function(e){var t=this;if(this.edit)return!1;this.$store.commit("active/clear"),this.$store.commit("controls/transformNode",this.id),this.$store.commit("active/setNode",this.id),this.dragging=!0;var n=this.dragStartPointer,r=this.cacheTranslate,i=this.translate,o=this.canvas;r.x=this.translate.x,r.y=this.translate.y,n.x=e.clientX,n.y=e.clientY;var c=this.$store.getters["canvas/scale"],a=function(e){i.x=r.x+Math.round((e.clientX-n.x)*c),i.y=r.y+Math.round((e.clientY-n.y)*c)},s=function e(){t.dragging=!1,o.removeEventListener("mousemove",a),o.removeEventListener("mouseup",e)};o.addEventListener("mousemove",a),o.addEventListener("mouseup",s)}}},h=l,p=(n("b88b"),n("2877")),m=Object(p["a"])(h,r,i,!1,null,"7b470d57",null);t["a"]=m.exports}}]);