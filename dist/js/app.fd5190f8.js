(function(e){function t(t){for(var r,i,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var a=n[i];0!==o[a]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},o={app:0},s=[];function a(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-13c70568":"0f622d5c","chunk-302a3dcd":"cdd359fa","chunk-4668870e":"b7d23281","chunk-6c042e96":"67b154ab","chunk-38456e85":"e296524b","chunk-d3360936":"cf4a8e83","chunk-2d229a09":"aeadfce1"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-13c70568":1,"chunk-302a3dcd":1,"chunk-4668870e":1,"chunk-6c042e96":1,"chunk-38456e85":1,"chunk-d3360936":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-13c70568":"3bce03e4","chunk-302a3dcd":"a98aaaa4","chunk-4668870e":"9f993ea6","chunk-6c042e96":"d76d026e","chunk-38456e85":"509ec42b","chunk-d3360936":"509ec42b","chunk-2d229a09":"31d6cfe0"}[e]+".css",o=c.p+r,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var u=s[a],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===o))return t()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){u=h[a],d=u.getAttribute("data-href");if(d===r||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[e],f.parentNode.removeChild(f),n(s)},f.href=o;var l=document.getElementsByTagName("head")[0];l.appendChild(f)})).then((function(){i[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=a(e);var h=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",h.name="ChunkLoadError",h.type=r,h.request=i,n[1](h)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var h=0;h<u.length;h++)t(u[h]);var f=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0166":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("path",{style:e.cssStyle,attrs:{d:e.lineShape.start,"marker-start":"url(#"+e.markerStart+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.end,"marker-end":"url(#"+e.markerEnd+")"}}),n("path",{style:e.cssStyle,attrs:{d:e.lineShape.mid,"marker-mid":"url(#"+e.markerMid+")"}})])},i=[],o=n("ade3"),s=n("5530"),a=(n("e9c4"),n("fb6a"),n("2af1"),n("d3b7"),n("159b"),n("99af"),n("b514")),c={name:"brokenLine",mixins:[a["a"]],props:{configure:{type:Object,default:function(){return{safeDistance:30}}},cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 0)",stroke:"rgba(40, 86, 255, 1)",strokeWidth:2}}}},data:function(){return{startDirection:{axis:"x",sign:1},endDirection:{axis:"x",sign:1}}},computed:{direction:function(){return{start:this.startMessage.direction,end:this.endMessage.direction}},lineShape:function(){var e=this.startDirection,t=this.endDirection,n=[];n=e.axis===t.axis&&e.sign===t.sign?this.sameAxisAndDirection(e.axis,e.sign):e.axis===t.axis&&e.sign!==t.sign?this.sameAxisDiffDirection(e.axis,e.sign):this.diffAxis();var r=[],i=[],o=[],s=n.length-1;if(s%2===0){var a=s/2;i=JSON.parse(JSON.stringify(n.slice(a-1,a+2))),1===a?(r=i,o=i):(r=JSON.parse(JSON.stringify(n.slice(0,a))),o=JSON.parse(JSON.stringify(n.slice(a+1))))}else{var c=Math.floor(s/2);r=JSON.parse(JSON.stringify(n.slice(0,c+1))),i=JSON.parse(JSON.stringify([n[c],{operate:"L",position:{x:n[c].position.x+(n[c+1].position.x-n[c].position.x)/2,y:n[c].position.y+(n[c+1].position.y-n[c].position.y)/2}},n[c+1]])),o=JSON.parse(JSON.stringify(n.slice(c+1)))}return i[0].operate="M",o[0].operate="M",{start:this.lineShapeToD(r),mid:this.lineShapeToD(i),end:this.lineShapeToD(o)}},startNode:function(){if(this.startMessage.node){var e=this.$store.getters["component/getNode"](this.startMessage.node);if(e)return{size:Object(s["a"])({},e.size),position:Object(s["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(s["a"])({},this.startMessage.position)}},endNode:function(){if(this.endMessage.node){var e=this.$store.getters["component/getNode"](this.endMessage.node);if(e)return{size:Object(s["a"])({},e.size),position:Object(s["a"])({},e.position)}}return{size:{width:0,height:0},position:Object(s["a"])({},this.endMessage.position)}}},methods:{calcDirection:function(){var e={x:1,y:0},t=this.startMessage,n=this.endMessage,r=t.direction,i={x:-n.direction.x||0,y:-n.direction.y||0};0===r.x&&0===r.y&&(r.x=1,r.y=0),0===i.x&&0===i.y&&(i.x=r.x,i.y=r.y);var o=function(t){var n="",r=Math.round((e.x*t.x+e.y*t.y)/Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))*Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)));return n=1===r?{axis:"x",sign:1}:0===r?t.y<0?{axis:"y",sign:-1}:{axis:"y",sign:1}:{axis:"x",sign:-1},n};this.startDirection=o(r),this.endDirection=o(i)},nodeCalcMessage:function(){var e=Object(s["a"])({},this.startNode),t=Object(s["a"])({},this.endNode);return{min:{x:Math.min(e.position.x,t.position.x),y:Math.min(e.position.y,t.position.y)},max:{x:Math.max(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y+e.size.height,t.position.y+t.size.height)},intersect:{x:Math.max(e.position.x,t.position.x)<=Math.min(e.position.x+e.size.width,t.position.x+t.size.width),y:Math.max(e.position.y,t.position.y)<=Math.min(e.position.y+e.size.height,t.position.y+t.size.height)}}},sameAxisAndDirection:function(e,t){var n="x"===e?"y":"x";"y"===e&&(t=-t);var r=this.startNode;r.size.x=r.size.width,r.size.y=r.size.height;var i=this.endNode;i.size.x=i.size.width,i.size.y=i.size.height;var a=this.startPosition,c=this.endPosition,u=this.configure.safeDistance,d=[{operate:"M",position:Object(s["a"])({},a)}];if(Math.sign(c[e]-a[e])===t){var h,f,l=Math.abs((c[e]-a[e])/2);d.push({operate:"L",position:(h={},Object(o["a"])(h,e,a[e]+l*t),Object(o["a"])(h,n,a[n]),h)},{operate:"L",position:(f={},Object(o["a"])(f,e,a[e]+l*t),Object(o["a"])(f,n,c[n]),f)},{operate:"L",position:Object(s["a"])({},c)})}else{var p=this.nodeCalcMessage(),m=0,g=Math.sign(c[n]-a[n]);if(0===g&&(g=1),m=g>0?p.max[n]:p.min[n],p.intersect.x&&p.intersect.y){var v,b,y,x,w=0;w=t>=0?Math.max(r.position[e]+r.size[e],i.position[e]+i.size[e]):Math.min(r.position[e],i.position[e]);var O=(v={},Object(o["a"])(v,e,w+u*t),Object(o["a"])(v,n,a[n]),v);d.push({operate:"L",position:O}),b={},Object(o["a"])(b,e,O[e]),Object(o["a"])(b,n,m+u*g),O=b,d.push({operate:"L",position:O}),y={},Object(o["a"])(y,e,c[e]-u*t),Object(o["a"])(y,n,O[n]),O=y,d.push({operate:"L",position:O}),x={},Object(o["a"])(x,e,O[e]),Object(o["a"])(x,n,c[n]),O=x,d.push({operate:"L",position:O}),d.push({operate:"L",position:Object(s["a"])({},c)})}else{var k,j,S,z,L,N=(k={},Object(o["a"])(k,e,a[e]+u*t),Object(o["a"])(k,n,a[n]),k);if(d.push({operate:"L",position:N}),p.intersect[n])z={},Object(o["a"])(z,e,N[e]),Object(o["a"])(z,n,m+u*g),N=z;else L={},Object(o["a"])(L,e,N[e]),Object(o["a"])(L,n,N[n]+Math.abs((c[n]-a[n])/2)*g),N=L;d.push({operate:"L",position:N}),j={},Object(o["a"])(j,e,c[e]-u*t),Object(o["a"])(j,n,N[n]),N=j,d.push({operate:"L",position:N}),S={},Object(o["a"])(S,e,N[e]),Object(o["a"])(S,n,c[n]),N=S,d.push({operate:"L",position:N}),d.push({operate:"L",position:Object(s["a"])({},c)})}}return d},sameAxisDiffDirection:function(e,t){"y"===e&&(t=-t);var n=-t,r=this.nodeCalcMessage(),i=this.configure.safeDistance,a=this.startNode;a.size.x=a.size.width,a.size.y=a.size.height;var c=this.endNode;c.size.x=c.size.width,c.size.y=c.size.height;var u=this.startPosition,d=this.endPosition,h="x"===e?"y":"x",f=d[e]-u[e],l=d[h]-u[h],p=Math.sign(l);0===p&&(p=1);var m=[{operate:"M",position:Object(s["a"])({},u)}];if(c.size[h]/2<Math.abs(l)){var g,v,b=t>=0?r.max[e]:r.min[e],y=(g={},Object(o["a"])(g,e,b+i*t),Object(o["a"])(g,h,u[h]),g);m.push({operate:"L",position:y}),v={},Object(o["a"])(v,e,y[e]),Object(o["a"])(v,h,d[h]),y=v,m.push({operate:"L",position:y}),m.push({operate:"L",position:Object(s["a"])({},d)})}else if(Math.sign(f)===t&&c.size[h]/2>=Math.abs(l)){var x,w,O,k,j=(x={},Object(o["a"])(x,e,u[e]+i*t),Object(o["a"])(x,h,u[h]),x),S=t>0?c.position[e]-u[e]:u[e]-(c.position[e]+c.size[e]);S>0&&S<i&&(j[e]=u[e]+S/2*t),m.push({operate:"L",position:j});var z=c.position[h]+c.size[h],L=c.position[h],N=0;N=Math.abs(L-u[h])<=Math.abs(z-u[h])?1:-1,w={},Object(o["a"])(w,e,j[e]),Object(o["a"])(w,h,1===N?L-i:z+i),j=w,m.push({operate:"L",position:j}),O={},Object(o["a"])(O,e,d[e]-i*n),Object(o["a"])(O,h,j[h]),j=O,m.push({operate:"L",position:j}),k={},Object(o["a"])(k,e,j[e]),Object(o["a"])(k,h,d[h]),j=k,m.push({operate:"L",position:j}),m.push({operate:"L",position:Object(s["a"])({},d)})}else if(Math.sign(f)!==t&&a.size[h]/2>=Math.abs(l)){var E,$,M,_,C=(E={},Object(o["a"])(E,e,u[e]+i*t),Object(o["a"])(E,h,u[h]),E);m.push({operate:"L",position:C});var P=0;P=p?1:-1,$={},Object(o["a"])($,e,C[e]),Object(o["a"])($,h,C[h]+(a.size[h]/2+i)*P),C=$,m.push({operate:"L",position:C}),M={},Object(o["a"])(M,e,d[e]-i*n),Object(o["a"])(M,h,C[h]),C=M;var W=t>0?a.position[e]-d[e]:d[e]-(a.position[e]+a.size[e]);W>0&&W<i&&(C[e]=d[e]+W/2*t),m.push({operate:"L",position:C}),_={},Object(o["a"])(_,e,C[e]),Object(o["a"])(_,h,d[h]),C=_,m.push({operate:"L",position:C}),m.push({operate:"L",position:Object(s["a"])({},d)})}return m},diffAxis:function(){var e,t,n,r=this.startDirection,i=r.axis,a=r.sign,c=this.endDirection,u=c.axis,d=c.sign;"y"===i&&(a=-a,d=-d);var h=this.nodeCalcMessage(),f=this.configure.safeDistance,l=this.startNode;l.size.x=l.size.width,l.size.y=l.size.height;var p=this.endNode;p.size.x=p.size.width,p.size.y=p.size.height;var m,g,v=this.startPosition,b=this.endPosition,y=[{operate:"M",position:Object(s["a"])({},v)}];if(Math.sign(b[i]-v[i])===a&&Math.sign(b[u]-v[u])===-d)return y.push({operate:"L",position:(m={},Object(o["a"])(m,i,b[i]),Object(o["a"])(m,u,v[u]),m)},{operate:"L",position:(g={},Object(o["a"])(g,i,b[i]),Object(o["a"])(g,u,b[u]),g)}),y;var x=a>0?p.position[i]-v[i]:v[i]-(p.position[i]+p.size[i]);if(x>0&&Math.sign(b[u]-v[u])===d){var w,O,k,j=(w={},Object(o["a"])(w,i,0),Object(o["a"])(w,u,v[u]),w);return Math.abs(x)<f?j[i]=v[i]+x/2*a:j[i]=v[i]+f*a,y.push({operate:"L",position:j}),O={},Object(o["a"])(O,i,j[i]),Object(o["a"])(O,u,b[u]+f*d),j=O,y.push({operate:"L",position:j},{operate:"L",position:(k={},Object(o["a"])(k,i,b[i]),Object(o["a"])(k,u,j[u]),k)},{operate:"L",position:Object(s["a"])({},b)}),y}var S=d>0?l.position[u]-(p.position[u]+p.size[u]):b[u]-(l.position[u]+l.size[u]),z=a>0?b[i]-v[i]:v[i]-b[i];if(z<=0&&S>0){var L,N,E,$=(L={},Object(o["a"])(L,i,v[i]+f*a),Object(o["a"])(L,u,v[u]),L);return y.push({operate:"L",position:$}),N={},Object(o["a"])(N,i,$[i]),Object(o["a"])(N,u,(d>0?l.position[u]:l.position[u]+l.size[u])-S/2*d),$=N,y.push({operate:"L",position:$},{operate:"L",position:(E={},Object(o["a"])(E,i,b[i]),Object(o["a"])(E,u,$[u]),E)},{operate:"L",position:Object(s["a"])({},b)}),y}var M=(e={},Object(o["a"])(e,i,h[a>0?"max":"min"][i]+f*a),Object(o["a"])(e,u,v[u]),e);return y.push({operate:"L",position:M}),t={},Object(o["a"])(t,i,M[i]),Object(o["a"])(t,u,h[d>0?"max":"min"][u]+f*d),M=t,y.push({operate:"L",position:M}),n={},Object(o["a"])(n,i,b[i]),Object(o["a"])(n,u,M[u]),M=n,y.push({operate:"L",position:M},{operate:"L",position:Object(s["a"])({},b)}),y},lineShapeToD:function(e){var t="";return e.forEach((function(e){t+="".concat(e.operate," ").concat(e.position.x," ").concat(e.position.y)})),t}},watch:{direction:{handler:function(){this.calcDirection()},immediate:!0}}},u=c,d=n("2877"),h=Object(d["a"])(u,r,i,!1,null,"33388962",null);t["default"]=h.exports},"0275":function(e,t,n){var r={"./circleShape.vue":"1aa7","./rectShape.vue":"bbbc"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="0275"},"0380":function(e,t,n){"use strict";n.r(t);var r=n("ade3");n("d3b7"),n("159b"),n("b64b"),n("a434"),n("a9e3"),n("99af");t["default"]={namespaced:!0,state:{stage:{},nodes:{},connectors:{},status:!0,distance:3,cacheNodesPosition:{x:{},y:{}},currentNode:"",structure:[]},getters:{status:function(e){return e.status},distance:function(e){return e.distance},structure:function(e){return e.structure}},mutations:{setStatus:function(e,t){e.status=t},setDistance:function(e,t){e.distance=t},setCurrentNode:function(e,t){var n=this.getters["component/getNode"](t);if(!n)return console.warn("找不到相关node组件：'".concat(t,"'")),!1;this.commit("adsorb/clearNodeCache",t),e.currentNode=n},clearNodeCache:function(e,t){var n=e.cacheNodesPosition,r=e.nodes[t],i=function(e){r&&Object.keys(r[e]).forEach((function(r){n[e][r]&&(n[e][r].some((function(e,n,r){e.node===t&&r.splice(n,1)})),n[e][r].length||delete n[e][r])}))};i("x"),i("y")},updateNode:function(e,t){var n,i;this.commit("adsorb/clearNodeCache",t),this.commit("adsorb/clearStructure");var o=e.cacheNodesPosition,s=this.getters["component/getNode"](t),a=s.position,c=s.size,u={x:(n={},Object(r["a"])(n,a.x,"start"),Object(r["a"])(n,a.x+c.width/2,"middle"),Object(r["a"])(n,a.x+c.width,"end"),n),y:(i={},Object(r["a"])(i,a.y,"start"),Object(r["a"])(i,a.y+c.height/2,"middle"),Object(r["a"])(i,a.y+c.height,"end"),i)};e.nodes[t]=u;var d=function(e){Object.keys(u[e]).forEach((function(n){o[e][n]?o[e][n].push({node:t,marker:u[e][n]}):o[e][n]=[{node:t,marker:u[e][n]}]}))};d("x"),d("y")},clearNode:function(e,t){this.commit("adsorb/clearNodeCache",t),delete e.nodes[t]},executeNodeAdsorb:function(e){var t,n,i=this;if(!e.status)return!1;this.commit("adsorb/clearStructure");var o=e.currentNode,s=o.position,a=o.size,c={x:(t={},Object(r["a"])(t,s.x,"start"),Object(r["a"])(t,s.x+a.width/2,"middle"),Object(r["a"])(t,s.x+a.width,"end"),t),y:(n={},Object(r["a"])(n,s.y,"start"),Object(r["a"])(n,s.y+a.height/2,"middle"),Object(r["a"])(n,s.y+a.height,"end"),n)},u=e.distance,d=e.cacheNodesPosition,h=function(e){var t={offset:0,start:"",middle:"",end:""},n=!1;return Object.keys(c[e]).forEach((function(r){r=Number(r);for(var i=c[e][r],o=0;o<=u;o+=.5){if(d[e][r-o]){if(!n){t={offset:-o,start:"",middle:"",end:""},t[i]=[].concat(d[e][r-o]),n=!0;break}if(Math.abs(t.offset)===o&&!t[i]){t[i]=[].concat(d[e][r-o]);break}}if(d[e][r+o]){if(!n){t={offset:o,start:"",middle:"",end:""},t[i]=[].concat(d[e][r+o]),n=!0;break}if(Math.abs(t.offset)===o&&!t[i]){t[i]=[].concat(d[e][r+o]);break}}}})),n?t:""},f=h("x"),l=h("y"),p=function(e,t){var n="",r="";return e.forEach((function(e){var s=i.getters["component/getNode"](e.node),a=Math.abs(o.position[t]-s.position[t]);(""===r||r>a)&&(r=a,n=e)})),n},m=function(t,n,r){if(t[n]){var i=p(t[n],"x"===r?"y":"x");e.structure.push({start:{node:o.id,axis:r,marker:n},end:{node:i.node,axis:r,marker:i.marker}})}};f&&(m(f,"start","x"),m(f,"middle","x"),m(f,"end","x"),f.offset&&(o.translate.x+=f.offset)),l&&(m(l,"start","y"),m(l,"middle","y"),m(l,"end","y"),l.offset&&(o.translate.y+=l.offset))},clearStructure:function(e){e.structure=[]}},actions:{}}},"068c":function(e,t,n){},"0af7":function(e,t,n){var r={"./arrowWidget.vue":"61d4","./textWidget.vue":"e0bd"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="0af7"},"11cd":function(e,t,n){"use strict";n("baad")},"167d":function(e,t,n){"use strict";n("8aab")},"1aa7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.size.width/2+", "+e.size.height/2+")"}})},i=[],o={name:"circleShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2}}}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2}}},s=o,a=n("2877"),c=Object(a["a"])(s,r,i,!1,null,"7c51f50a",null);t["default"]=c.exports},2142:function(e,t,n){var r={"./circleConnector.vue":"3c6e"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="2142"},2395:function(e,t,n){},2475:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{node:"",line:""},getters:{node:function(e){return e.node},line:function(e){return e.line}},mutations:{setNode:function(e,t){var n=this.getters["structure/getNode"](t);e.node=n},clearNode:function(e){e.node=""},setLine:function(e,t){var n=this.getters["structure/getLine"](t);e.line=n},clearLine:function(e){e.line=""},clear:function(e){e.node="",e.line=""}},actions:{}}},2721:function(e,t,n){"use strict";t["a"]={props:{id:{type:String,default:""},use:{type:String,default:"work"}}}},"2f14":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7"),n("159b"),n("b64b"),n("b0c0");var r=function(e){var t={},n=function(e){Object.keys(e).forEach((function(n){e[n].default&&(t[n]="function"===typeof e[n].default?e[n].default():e[n].default)}))};return e.mixins&&e.mixins.length&&e.mixins.forEach((function(e){e.props&&n(e.props)})),e.props&&n(e.props),e.name?t.component=e.name:console.error("component must hava a name"),t}},3916:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("foreignObject",{attrs:{width:e.size.width,height:e.size.height}},[n("div",{staticClass:"from-box"},[e.edit?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.configure.value,expression:"configure.value"}],style:e.cssStyle,attrs:{placeholder:e.configure.placeholder},domProps:{value:e.configure.value},on:{blur:function(){e.edit=!1},input:function(t){t.target.composing||e.$set(e.configure,"value",t.target.value)}}}):n("div",{staticClass:"display",style:e.cssStyle,domProps:{textContent:e._s(e.configure.value||e.configure.placeholder)},on:{dblclick:function(){e.edit=!0}}})])])},i=[],o={name:"textAreaWidget",props:{size:{type:Object,required:!0},configure:{type:Object,default:function(){return{value:"",placeholder:"双击输入"}}},cssStyle:{type:Object,default:function(){return{width:"100%",height:"100%",border:"0",color:"black",fontSize:"12px",padding:"0"}}}},data:function(){return{edit:!1}}},s=o,a=(n("167d"),n("2877")),c=Object(a["a"])(s,r,i,!1,null,"3c9798be",null);t["default"]=c.exports},"3c6e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("circle",{style:e.cssStyle,attrs:{r:e.r,transform:"translate("+e.position.x+", "+e.position.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},mouseup:e.mouseup}})},i=[],o=n("5530"),s={computed:{point:function(){return{x:this.node.position.x+this.position.x,y:this.node.position.y+this.position.y}}},methods:{mousedown:function(e){this.$store.commit("connect/applyDefaultLineStructure",this.$parent.line),this.$store.commit("connect/setDragStartPointer",{x:e.clientX,y:e.clientY}),this.$store.commit("connect/start",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})},mouseup:function(){this.$store.commit("connect/finish",{node:this.node.id,interface:this.interface,direction:Object(o["a"])({},this.direction),position:Object(o["a"])({},this.point)})}}},a={name:"cricleShape",mixins:[s],props:{node:{type:Object,default:function(){return{id:"",position:{x:0,y:0},size:{width:50,height:50}}},required:!0},interface:{type:String,default:""},direction:{type:Object,default:function(){return{x:0,y:0}}},translate:{type:Object,default:function(){return{x:.5,y:.5}}},offset:{type:Object,default:function(){return{x:0,y:0}}},size:{type:Object,default:function(){return{width:10,height:10}}},configure:{type:Object,default:function(){return{}}},cssStyle:{type:Object,default:function(){return{fill:"white",stroke:"blue",strokeWidth:1,cursor:"crosshair"}}}},data:function(){return{}},computed:{r:function(){return Math.min(this.size.width,this.size.height)/2},position:function(){var e=this.node;return{x:e.size.width*this.translate.x+this.offset.x,y:e.size.height*this.translate.y+this.offset.y}}},created:function(){}},c=a,u=n("2877"),d=Object(u["a"])(c,r,i,!1,null,"56e31581",null);t["default"]=d.exports},4360:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("2b0e"),i=n("2f62"),o=n("89d3"),s={};o.keys().forEach((function(e){"./index.js"!==e&&(s[e.replace(/.\/|\.js$/g,"")]=o(e).default)})),r["default"].use(i["a"]),t["default"]=new i["a"].Store({state:{mode:"dev"},getters:{mode:function(e){return e.mode}},mutations:{setMode:function(e,t){e.mode=t}},actions:{},modules:s})},5209:function(e,t,n){"use strict";n("560b")},"52ee":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"vis-connectLine",class:{"vis-connectLine-acitve":e.active},on:{click:function(t){return t.stopPropagation(),e.activeLine.apply(null,arguments)}}},[n("circle",{staticClass:"vis-connectLine-point",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.startNode.x+", "+e.startNode.y+")"},on:{mousedown:function(t){return e.mousedown(t,"start")}}}),n("defs",[n(e.framework.markerStart,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerStart,!1)),n(e.framework.markerMid,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerMid,!1)),n(e.framework.markerEnd,e._b({tag:"component",attrs:{id:e.id}},"component",e.markerEnd,!1))],1),n(e.framework.shape,e._b({tag:"component",attrs:{markerStart:""+e.id+e.framework.markerStart,markerMid:""+e.id+e.framework.markerMid,markerEnd:""+e.id+e.framework.markerEnd,startPosition:e.startPosition,endPosition:e.endPosition,startMessage:e.start,endMessage:e.end}},"component",e.shape,!1)),n("circle",{staticClass:"vis-connectLine-point",style:e.point.style,attrs:{r:e.point.r,transform:"translate("+e.endNode.x+", "+e.endNode.y+")"},on:{mousedown:function(t){return e.mousedown(t,"end")}}})],1)},i=[],o=n("5530"),s=n("2721"),a=n("5862"),c=n("745b"),u={name:"connectLine",mixins:[s["a"]],components:Object(o["a"])(Object(o["a"])({},a["a"]),c["a"]),props:{framework:{type:Object,default:function(){return{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrow"}}},start:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},end:{type:Object,default:function(){return{node:"",interface:"",direction:"",position:{x:0,y:0}}},required:!0},shape:{type:Object,required:!0},markerStart:{type:Object},markerMid:{type:Object},markerEnd:{type:Object}},data:function(){return{point:{r:10,style:{fill:"white",stroke:"green",strokeWidth:1,cursor:"move"}},startPosition:{x:0,y:0},endPosition:{x:0,y:0}}},computed:{startNode:function(){var e=this.$store.getters["component/getNode"](this.start.node);return e&&e.$refs[this.start.interface][0]?e.$refs[this.start.interface][0].point:this.start.position},endNode:function(){var e=this.$store.getters["component/getNode"](this.end.node);return e&&e.$refs[this.end.interface][0]?e.$refs[this.end.interface][0].point:this.end.position},canvas:function(){return this.$store.getters["canvas/canvas"]},active:function(){return this.$store.getters["active/line"].id===this.id}},methods:{activeLine:function(){this.$store.commit("active/clear"),this.$store.commit("active/setLine",this.id)},mousedown:function(e,t){this.$store.commit("connect/setFinishFlag",t);var n=this[t].position,r=this.canvas,i=this.$store.getters["canvas/scale"],s=Object(o["a"])({},n),a={x:e.clientX,y:e.clientY},c=r.getBoundingClientRect(),u=function(e){n.x=s.x+Math.round((e.clientX-a.x)*i),n.y=s.y+Math.round((e.clientY-a.y)*i)},d=function e(){r.removeEventListener("mousemove",u),r.removeEventListener("mouseup",e)},h=function e(){var t=30;n.x<=0?n.x=t:n.x>=c.width-5&&(n.x=c.width-t),n.y<=0?n.y=t:n.y>=c.height-5&&(n.y=c.height-t),r.removeEventListener("mousemove",u),r.removeEventListener("mouseup",d),r.removeEventListener("mouseleave",e)};r.addEventListener("mousemove",u),r.addEventListener("mouseup",d),r.addEventListener("mouseleave",h)}},watch:{startNode:{handler:function(e,t){e!==t&&(e!==this.start.position&&(this.start.position.x=e.x,this.start.position.y=e.y),this.startPosition=e)},immediate:!0},endNode:{handler:function(e,t){e!==t&&(e!==this.end.position&&(this.end.position.x=e.x,this.end.position.y=e.y),this.endPosition=e)},immediate:!0}}},d=u,h=(n("5209"),n("2877")),f=Object(h["a"])(d,r,i,!1,null,"a0190d76",null);t["a"]=f.exports},5364:function(e,t,n){},"551c":function(e,t,n){var r={"./brokenShape.vue":"0166","./linearShape.vue":"e1d2"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="551c"},"560b":function(e,t,n){},"562e":function(e,t,n){"use strict";t["a"]=function(){return{name:"basicBroken",label:"基础折线",desp:"干净的折线",structure:{framework:{shape:"brokenShape",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=(n("d3b7"),n("bc3a")),o=n.n(i);console.log("".concat(window.location.href));var s={baseURL:"".concat(window.location.href)},a=o.a.create(s);a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){return{status:e.status,data:e.data}}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=a,window.axios=a,Object.defineProperties(e.prototype,{axios:{get:function(){return a}},$axios:{get:function(){return a}}})},r["default"].use(Plugin);Plugin;var c=n("5c96"),u=n.n(c),d=(n("0fae"),n("5364"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"top-nav"},[n("top-nav-view")],1),n("div",{staticClass:"container-main"},[n("div",{staticClass:"object-part"},[n("object-view")],1),n("div",{staticClass:"canvas-part"},[n("canvas-view")],1),n("div",{staticClass:"function-part"},[n("function-view")],1)])])}),h=[],f=(n("159b"),n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"canvasView-container"},[n("svg",{ref:"svgCanvas",staticClass:"svg-container",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",tabindex:"0",viewBox:e.canvasOffset.x+" "+e.canvasOffset.y+" "+e.width*e.canvasScale+" "+e.height*e.canvasScale,width:e.width,height:e.height}},[n("stage",{attrs:{size:e.stageSize,translate:e.$store.getters["stage/translate"]}}),e._l(e.lines,(function(t){return n(t.component,e._b({key:t.id,tag:"connect-line"},"connect-line",t,!1))})),e._l(e.nodes,(function(t){return n("node",e._b({key:t.id,ref:t.id,refInFor:!0},"node",t,!1))})),e._l(e.helperStructure,(function(e,t){return n("node-spacing",{key:t,attrs:{start:e.start,end:e.end}})})),e.dev?n("transfrom-controls",{ref:"transformControls",attrs:{show:e.transformControls.show,target:e.transformControls}}):e._e(),e.dev?n("selection-box"):e._e()],2)])}),l=[],p=n("5530"),m=(n("2af1"),n("38cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{style:e.svgStyle,attrs:{width:e.end.x-e.start.x,height:e.end.y-e.start.y,transform:"translate("+e.start.x+", "+e.start.y+")"}})}),g=[],v=(n("6062"),n("3ca3"),n("ddb0"),{props:{selection:{type:Object,default:function(){}},start:{type:Object,default:function(){return{x:0,y:0}}},end:{type:Object,default:function(){return{x:0,y:0}}}},data:function(){return{intersection:new Set,svgStyle:{fill:"rgba(0, 0, 200, 0.2)",strokeWidth:1,stroke:"blue"}}},methods:{getIntersection:function(){return this.intersection},intersectObject:function(){}}}),b=v,y=n("2877"),x=Object(y["a"])(b,m,g,!1,null,"7a888e47",null),w=x.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("rect",{staticStyle:{cursor:"nw-resize"},style:e.nodeStyle,attrs:{width:e.scaleNodeSize.width,height:e.scaleNodeSize.height,transform:"translate("+e.leftTop.x+", "+e.leftTop.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.leftTopHandler.apply(null,arguments)}}}),n("rect",{staticStyle:{cursor:"ne-resize"},style:e.nodeStyle,attrs:{width:e.scaleNodeSize.width,height:e.scaleNodeSize.height,transform:"translate("+e.rightBottom.x+", "+e.leftTop.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.rightTopHandler.apply(null,arguments)}}}),n("rect",{staticStyle:{cursor:"se-resize"},style:e.nodeStyle,attrs:{width:e.scaleNodeSize.width,height:e.scaleNodeSize.height,transform:"translate("+e.rightBottom.x+", "+e.rightBottom.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.rightBottomHandler.apply(null,arguments)}}}),n("rect",{staticStyle:{cursor:"sw-resize"},style:e.nodeStyle,attrs:{width:e.scaleNodeSize.width,height:e.scaleNodeSize.height,transform:"translate("+e.leftTop.x+", "+e.rightBottom.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.leftBottomHandler.apply(null,arguments)}}})])},k=[],j=(n("18a5"),{props:{show:{type:Boolean,default:!0},target:{type:Object,default:function(){return{node:"",translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}}}},data:function(){return{nodeStyle:{stroke:"#0F9BFF",strokeWidth:1,fill:"white",shapeRendering:"crispEdges"},maskStyle:{stroke:"#1584FC",strokeWidth:2,fill:"transparent",cursor:"move"},dragging:!1,changed:!1}},computed:{position:function(){return{x:this.target.translate.x-this.target.anchor.x,y:this.target.translate.y-this.target.anchor.y}},halfScaleNodeSize:function(){return{width:this.scaleNodeSize.width/2,height:this.scaleNodeSize.height/2}},leftTop:function(){return{x:this.position.x-this.halfScaleNodeSize.width,y:this.position.y-this.halfScaleNodeSize.height}},rightBottom:function(){return{x:this.position.x-this.halfScaleNodeSize.width+this.target.size.width,y:this.position.y-this.halfScaleNodeSize.height+this.target.size.height}},canvas:function(){return this.$store.getters["canvas/canvas"]},canvasScale:function(){return this.$store.getters["canvas/scale"]},scaleNodeSize:function(){var e=10*this.canvasScale;return e<5&&(e=5),{width:e,height:e}}},methods:{leftTopHandler:function(e){var t=this,n={x:e.clientX,y:e.clientY},r=Object(p["a"])({},this.target.size),i=Object(p["a"])({},this.target.translate),o=this.canvasScale,s=this.target.size,a=this.target.translate,c=0,u=0;this.$store.commit("adsorb/setCurrentNode",this.target.node);var d=function(e){c=Math.round((e.clientX-n.x)*o),u=Math.round((e.clientY-n.y)*o),r.width-5<c&&(c=r.width-5),r.height-5<u&&(u=r.height-5),s.width=r.width-c,s.height=r.height-u,a.x=i.x+c,a.y=i.y+u},h=function e(){t.$store.commit("adsorb/updateNode",t.target.node),document.body.removeEventListener("mousemove",d),document.body.removeEventListener("mouseup",e)};document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",h),this.changed=!0},rightTopHandler:function(e){var t=this,n={x:e.clientX,y:e.clientY},r=Object(p["a"])({},this.target.size),i=Object(p["a"])({},this.target.translate),o=this.canvasScale,s=this.target.size,a=this.target.translate,c=0,u=0;this.$store.commit("adsorb/setCurrentNode",this.target.node);var d=function(e){c=Math.round((e.clientX-n.x)*o),u=Math.round((e.clientY-n.y)*o),r.width+c<5&&(c=5-r.width),r.height-5<u&&(u=r.height-5),s.width=r.width+c,s.height=r.height-u,a.y=i.y+u},h=function e(){t.$store.commit("adsorb/updateNode",t.target.node),document.body.removeEventListener("mousemove",d),document.body.removeEventListener("mouseup",e)};document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",h),this.changed=!0},rightBottomHandler:function(e){var t=this,n={x:e.clientX,y:e.clientY},r=Object(p["a"])({},this.target.size),i=this.canvasScale,o=this.target.size;this.$store.commit("adsorb/setCurrentNode",this.target.node);var s=function(e){o.width=r.width+Math.round((e.clientX-n.x)*i),o.height=r.height+Math.round((e.clientY-n.y)*i),o.width<5&&(o.width=5),o.height<5&&(o.height=5)},a=function e(){t.$store.commit("adsorb/updateNode",t.target.node),t.$store.commit("adsorb/updateNode",t.target.node),document.body.removeEventListener("mousemove",s),document.body.removeEventListener("mouseup",e)};document.body.addEventListener("mousemove",s),document.body.addEventListener("mouseup",a),this.changed=!0},leftBottomHandler:function(e){var t=this,n={x:e.clientX,y:e.clientY},r=Object(p["a"])({},this.target.size),i=Object(p["a"])({},this.target.translate),o=this.canvasScale,s=this.target.size,a=this.target.translate,c=0,u=0;this.$store.commit("adsorb/setCurrentNode",this.target.node);var d=function(e){c=Math.round((e.clientX-n.x)*o),u=Math.round((e.clientY-n.y)*o),r.width-5<c&&(c=r.width-5),r.height+u<5&&(u=5-r.height),s.width=r.width-c,s.height=r.height+u,a.x=i.x+c},h=function e(){t.$store.commit("adsorb/updateNode",t.target.node),document.body.removeEventListener("mousemove",d),document.body.removeEventListener("mouseup",e)};document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",h),this.changed=!0}}}),S=j,z=Object(y["a"])(S,O,k,!1,null,"713497ec",null),L=z.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"vis-node",class:{"connector-hover":e.configure.connector.hover&&!e.dragging,"vis-node-acitve":e.active,"vis-node-edit":e.edit},attrs:{tabindex:"0",width:e.size.width,height:e.size.height,transform:"translate("+e.position.x+", "+e.position.y+")rotate("+e.rotate+", "+e.anchor.x+" "+e.anchor.y+")"},on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)},dblclick:e.dblclick}},[n(e.framework.shape,e._b({tag:"component",attrs:{size:e.size}},"component",e.shape,!1)),e.configure.backgroundImage?n("image",{attrs:{width:e.size.width,height:e.size.height,href:e.configure.backgroundImage}}):e._e(),e.configure.icon?n("g",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{width:e.size.width,height:e.size.height,"xlink:href":e.configure.icon}})]):e._e(),n(e.framework.widget,e._b({tag:"component",attrs:{size:e.size}},"component",e.widget,!1)),e._l(e.connector,(function(t){return n(t.component,e._b({key:t.interface,ref:t.interface,refInFor:!0,tag:"component",class:{"connector-transparent":e.configure.connector.hover},attrs:{node:{id:e.id,position:e.position,size:e.size}}},"component",t,!1))}))],2)},E=[],$=(n("a9e3"),n("2721")),M={props:{translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}}},data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(e){e.stopPropagation()},r=function(t){t.stopPropagation(),e.$store.commit("active/setNode",e.id),e.$store.commit("controls/transformNode",e.id)},i=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},o=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(o.addEventListener("mouseenter",t),o.addEventListener("mouseleave",n),o.addEventListener("click",r),o.addEventListener("keyup",i)):(o.removeEventListener("mouseenter",t),o.removeEventListener("mouseleave",n),o.removeEventListener("click",r),o.removeEventListener("keyup",i))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},_={data:function(){return{$dragging:!1,$devWatcher:null}},computed:{$dev:function(){return"dev"===this.$store.getters.mode}},mounted:function(){var e=this;if("work"===this.use){var t=function(e){e.stopPropagation()},n=function(e){e.stopPropagation()},r=function(e){e.stopPropagation()},i=function(e){e.stopPropagation()},o=function(t){46===t.keyCode&&(e.$store.commit("structure/deleteNode",e.id),e.$store.commit("controls/resetTransform"))},s=this.$el;this.$devWatcher=this.$watch("$dev",(function(e){e?(s.addEventListener("mouseenter",t),s.addEventListener("mouseleave",r),s.addEventListener("mousedown",n),s.addEventListener("click",i),s.addEventListener("keyup",o)):(s.removeEventListener("mouseenter",t),s.removeEventListener("mouseleave",r),s.removeEventListener("mousedown",n),s.removeEventListener("click",i),s.removeEventListener("keyup",o))}),{immediate:!0})}},beforeDestroy:function(){this.$devWatcher()}},C=(n("ac1f"),n("5319"),n("0275")),P={};C.keys().forEach((function(e){P[e.replace(/.\/|\.vue$/g,"")]=C(e).default}));var W=n("2142"),D={};W.keys().forEach((function(e){D[e.replace(/.\/|\.vue$/g,"")]=W(e).default}));var T=n("b256"),B={};T.keys().forEach((function(e){B[e.replace(/.\/|\.vue$/g,"")]=T(e).default}));var Y={name:"node",mixins:[$["a"],M,_],components:Object(p["a"])(Object(p["a"])(Object(p["a"])({},P),D),B),props:{framework:{type:Object,default:function(){return{shape:"rectShape",widget:"",connector:"single"}}},translate:{type:Object,default:function(){return{x:0,y:0}}},rotate:{type:Number,default:0},anchor:{type:Object,default:function(){return{x:25,y:25}}},size:{type:Object,default:function(){return{width:50,height:50}}},configure:{type:Object,default:function(){return{connector:{hover:!0},backgroundImage:"",icon:""}}},widget:{type:Object},shape:{type:Object},connector:{type:Array},line:{type:Object,default:function(){return{framework:{shape:"linear",markerStart:"",markerMid:"textWidget",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{},connective:{}}}}},data:function(){return{dragging:!1,edit:!1,dragStartPointer:{x:0,y:0},cacheTranslate:{x:0,y:0}}},computed:{position:function(){return{x:this.translate.x-this.anchor.x,y:this.translate.y-this.anchor.y}},canvas:function(){return this.$store.getters["canvas/canvas"]},active:function(){return this.$store.getters["active/node"].id===this.id}},methods:{dblclick:function(){var e=this;this.edit=!0;var t=function t(){e.edit=!1,document.body.removeEventListener("mousedown",t)};document.body.addEventListener("mousedown",t)},mousedown:function(e){var t=this;if(this.edit)return!1;this.$store.commit("active/clear"),this.$store.commit("controls/transformNode",this.id),this.$store.commit("active/setNode",this.id),this.dragging=!0;var n=this.dragStartPointer,r=this.cacheTranslate,i=this.translate,o=this.canvas;r.x=this.translate.x,r.y=this.translate.y,n.x=e.clientX,n.y=e.clientY;var s=this.$store.getters["canvas/scale"];this.$store.commit("adsorb/setCurrentNode",this.id);var a=function(e){i.x=r.x+Math.round((e.clientX-n.x)*s),i.y=r.y+Math.round((e.clientY-n.y)*s),t.$store.commit("adsorb/executeNodeAdsorb")},c=function e(){t.dragging=!1,t.$store.commit("adsorb/updateNode",t.id),o.removeEventListener("mousemove",a),o.removeEventListener("mouseup",e)};o.addEventListener("mousemove",a),o.addEventListener("mouseup",c)}}},J=Y,X=(n("d3b9"),Object(y["a"])(J,N,E,!1,null,"3914dd38",null)),q=X.exports,A=n("52ee"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{style:e.cssStyle,attrs:{width:e.size.width,height:e.size.height,transform:"translate("+e.translate.x+", "+e.translate.y+")"}})},U=[],H={props:{size:{type:Object,default:function(){return{width:window.innerWidth,height:window.innerHeight}}},translate:{type:Object,default:function(){return{x:0,y:0}}},cssStyle:{type:Object,default:function(){return{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(200, 200, 200, 1)",strokeWidth:1,filter:"drop-shadow(2px 2px 6px rgb(150, 150, 150))"}}}}},I=H,V=Object(y["a"])(I,F,U,!1,null,"2dd1ea3f",null),R=V.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.message.distance?n("g",[n("defs",[n("marker",{attrs:{id:e.id,markerWidth:e.message.textLength,markerHeight:1.5*e.fontSize,markerUnits:"userSpaceOnUse",viewBox:-e.message.textLength/2+" "+-e.fontSize/2+" "+e.message.textLength+" "+1.5*e.fontSize,refX:0,refY:0,orient:"0"}},[n("text",{style:e.textStyle,attrs:{x:-e.message.textLength/2,y:e.fontSize/2,"font-size":e.fontSize,textLength:e.message.textLength}},[e._v(" "+e._s(e.message.distance+"px")+" ")])])]),n("path",{style:e.lineStyle,attrs:{d:"M "+e.message.start.x+" "+e.message.start.y+" L "+e.message.middle.x+" "+e.message.middle.y+" L "+e.message.end.x+" "+e.message.end.y,"marker-mid":"url(#"+e.id+")"}}),e._v(" text ")]):e._e()},G=[],Q=n("ade3"),Z=(n("25f0"),n("ec26")),ee={props:{start:{type:Object,default:function(){return{node:"",axis:"",marker:""}}},end:{type:Object,default:function(){return{node:"",axis:"",marker:""}}}},data:function(){return{fontSize:12,textStyle:{fill:"rgb(235, 67, 255)",filter:"drop-shadow(0 0 3px rgb(255, 255, 255))"},lineStyle:{stroke:"rgb(235, 67, 255)",strokeWidth:1},id:Object(Z["a"])()}},computed:{message:function(){var e,t,n=this.start,r=this.end,i=n.axis,o="x"===i?"y":"x",s=this.getBoundingBox(n.node),a=this.getBoundingBox(r.node),c=0,u=(e={},Object(Q["a"])(e,i,s[i][n.marker]),Object(Q["a"])(e,o,0),e),d=(t={},Object(Q["a"])(t,i,a[i][r.marker]),Object(Q["a"])(t,o,0),t);return s[o].end<=a[o].start?(c=Math.abs(a[o].start-s[o].end),u[o]=s[o].end,d[o]=a[o].start):s[o].start>=a[o].end&&(c=Math.abs(s[o].start-a[o].end),u[o]=s[o].start,d[o]=a[o].end),{start:u,middle:{x:u.x+(d.x-u.x)/2,y:u.y+(d.y-u.y)/2},end:d,distance:c,textLength:c.toString().length+2*this.fontSize*1.2}}},methods:{getBoundingBox:function(e){var t=this.$store.getters["component/getNode"](e),n=t.position,r=t.size;return{x:{start:n.x,middle:n.x+r.width/2,end:n.x+r.width},y:{start:n.y,middle:n.y+r.height/2,end:n.y+r.height}}}},created:function(){}},te=ee,ne=Object(y["a"])(te,K,G,!1,null,"2d7a9202",null),re=ne.exports,ie={components:{selectionBox:w,transfromControls:L,node:q,connectLine:A["a"],stage:R,nodeSpacing:re},data:function(){return{width:0,height:0,stageSafeDistance:50}},computed:{dev:function(){return"dev"===this.$store.getters.mode},nodes:function(){return this.$store.getters["structure/nodes"]},connectors:function(){return this.$store.getters["structure/connectors"]},lines:function(){return this.$store.getters["structure/lines"]},transformControls:function(){return this.$store.getters["controls/transform"]},stageSize:function(){return this.$store.getters["stage/size"]},canvasOffset:function(){return this.$store.getters["canvas/offset"]},canvasScale:function(){return this.$store.getters["canvas/scale"]},helperStructure:function(){return this.dev?this.$store.getters["adsorb/structure"]:[]}},methods:{resize:function(){var e=this,t=this.$refs.container;this.width=t.offsetWidth,this.height=t.offsetHeight,this.$nextTick((function(){var t=e.$refs.svgCanvas,n=t.getBoundingClientRect(),r=e.stageSafeDistance,i=e.stageSafeDistance;e.stageSize.width<n.width&&(r=(n.width-e.stageSize.width)/2),e.stageSize.height<n.height&&(i=(n.height-e.stageSize.height)/2),e.$store.commit("stage/setTranslate",{x:r,y:i})}))}},mounted:function(){var e=this;this.resize(),window.addEventListener("resize",this.resize),this.$store.commit("component/setCanvas",this);var t=this.$refs.svgCanvas;t.addEventListener("click",(function(){if(e.$refs.transformControls.changed)return e.$refs.transformControls.changed=!1,!1;e.$store.commit("controls/resetTransform"),e.$store.commit("active/clear")}));var n=this.canvasOffset;t.addEventListener("mousewheel",(function(t){if(t.altKey){var r=e.canvasScale+.1*Math.sign(t.deltaY);r<=.1&&(r=.1),r>5&&(r=5),e.$store.commit("canvas/setOffset",{x:n.x+t.offsetX*e.canvasScale-t.offsetX*r,y:n.y+t.offsetY*e.canvasScale-t.offsetY*r}),e.$store.commit("canvas/setScale",r)}else{var i=n.y+t.deltaY;i<0&&(i=0),i>2*e.height&&(i=2*e.height),e.$store.commit("canvas/setOffset",{y:i})}}));var r={x:0,y:0},i={x:0,y:0},o=function(e){t.style.cursor="grabbing",r.x=e.clientX,r.y=e.clientY,i=Object(p["a"])({},n),t.addEventListener("mousemove",s)},s=function(t){e.$store.commit("canvas/setOffset",{x:i.x-(t.clientX-r.x),y:i.y-(t.clientY-r.y)})},a=function(){t.style.cursor="grab",t.removeEventListener("mousemove",s)};t.addEventListener("keydown",(function(e){if(e.preventDefault(),e.repeat)return!1;32===e.keyCode&&(t.style.cursor="grab",t.addEventListener("mousedown",o),t.addEventListener("mouseup",a))})),t.addEventListener("keyup",(function(e){32===e.keyCode&&(t.style.cursor="unset",t.removeEventListener("mousedown",o),t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",a))})),this.$store.commit("canvas/setCanvas",t)}},oe=ie,se=(n("faa9"),Object(y["a"])(oe,f,l,!1,null,"55942671",null)),ae=se.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objectView-container"},[n("el-collapse",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.themeMenu,(function(t){return n("el-collapse-item",{key:t.name,attrs:{title:t.label,name:t.name}},e._l(t.inventory,(function(t){return n("node-display-window",{key:t.name,attrs:{width:e.windowWidth,height:e.windowHeight,structure:t.structure}})})),1)})),1)],1)},ue=[],de=(n("d81d"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"display-window-container",style:{width:e.width+"px",height:e.height+"px"},on:{mousedown:function(t){return e.dragStart(t,e.structure)}}},[n("svg",{staticStyle:{"pointer-events":"none"},attrs:{width:e.width,height:e.height}},[n(e.structure.component,e._b({tag:"component",attrs:{use:"display",translate:e.displayPosition}},"component",e.structure,!1))],1)])}),he=[],fe=(n("e9c4"),{components:{node:q},props:{width:{type:Number,default:50},height:{type:Number,default:50},structure:{type:Object}},data:function(){return{}},computed:{displayPosition:function(){return{x:this.width/2,y:this.height/2}}},methods:{dragStart:function(e,t){var n=this,i=r["default"].observable(JSON.parse(JSON.stringify(t)));i.id=Object(Z["a"])(),i.translate.x=-100,i.translate.y=-100;var o=this.$store.getters["canvas/canvas"],s=this.$store.getters["canvas/scale"],a=this.$store.getters["canvas/offset"],c={x:0,y:0},u={x:0,y:0},d=function(e){c.x=e.clientX,c.y=e.clientY,u.x=Math.round(e.offsetX*s)+a.x,u.y=Math.round(e.offsetY*s)+a.y,n.$store.commit("structure/addNode",i),n.$store.commit("active/clear"),n.$store.commit("active/setNode",i.id),n.$store.commit("controls/transformNode",i.id),n.$nextTick((function(){n.$nextTick((function(){n.$store.commit("adsorb/setCurrentNode",i.id)}))}))},h=function(e){e.stopPropagation(),i.translate.x=u.x+Math.round((e.clientX-c.x)*s)-10,i.translate.y=u.y+Math.round((e.clientY-c.y)*s)-10,n.$store.commit("adsorb/executeNodeAdsorb")},f=function e(){n.$store.commit("adsorb/updateNode",i.id),o.removeEventListener("mouseenter",d),o.removeEventListener("mousemove",h),document.body.removeEventListener("mouseup",e)};o.addEventListener("mouseenter",d),o.addEventListener("mousemove",h),document.body.addEventListener("mouseup",f)}},created:function(){}}),le=fe,pe=(n("e044"),Object(y["a"])(le,de,he,!1,null,"33f2983a",null)),me=pe.exports,ge=n("7ce2"),ve=n.n(ge),be=n("def3"),ye=function(){return{framework:{shape:"",widget:"",connector:1},size:{width:50,height:50},anchor:{x:25,y:25},configure:{connector:{hover:!0},backgroundImage:"",icon:""},shape:{cssStyle:{fill:"rgba(56, 117, 232)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2}},widget:"",connector:[{interface:"p1",direction:{x:0,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:.5},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 255, 1)",strokeWidth:1,cursor:"crosshair"}}],line:Object(be["a"])().structure}},xe=[{name:"basicRect",label:"基础矩形",structure:{framework:{shape:"rectShape"}}},{name:"basicCircle",label:"基础圆形",structure:{framework:{shape:"circleShape"}}}],we=function(){return{name:"basicShape",label:"基础图形",desp:"形状与单节点",inventory:xe.map((function(e){return e.structure=ve()(ye(),e.structure),e}))}},Oe=n("562e"),ke=function(){return{framework:{shape:"",widget:"textAreaWidget",connector:"square"},size:{width:70,height:50},anchor:{x:35,y:25},configure:{connector:{hover:!1}},widget:{cssStyle:{padding:"2px 4px","box-sizing":"border-box"}},shape:{cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2}},connector:[{interface:"p1",direction:{x:0,y:1},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:0},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 255, 1)",strokeWidth:1,cursor:"crosshair"}},{interface:"p2",direction:{x:1,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:1,y:.5},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 255, 1)",strokeWidth:1,cursor:"crosshair"}},{interface:"p3",direction:{x:0,y:-1},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:1},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 255, 1)",strokeWidth:1,cursor:"crosshair"}},{interface:"p4",direction:{x:-1,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:0,y:.5},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 255, 1)",strokeWidth:1,cursor:"crosshair"}}],line:Object(Oe["a"])().structure}},je=[{name:"squareRect",label:"四方矩形",structure:{framework:{shape:"rectShape"}}},{name:"squareCircle",label:"四方圆形",structure:{framework:{shape:"circleShape"}}}],Se=function(){return{name:"squareText",label:"四方表单",desp:"形状表单与四方节点",inventory:je.map((function(e){return e.structure=ve()(ke(),e.structure),e}))}},ze=function(){return{framework:{shape:"circleShape",widget:""},size:{width:50,height:50},anchor:{x:25,y:25},configure:{connector:{hover:!1}},widget:{cssStyle:{padding:"2px 4px","box-sizing":"border-box"}},shape:{cssStyle:{fill:"rgba(255, 255, 255, 0)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:0}},connector:[{interface:"p1",direction:{x:0,y:1},component:"circleConnector",size:{width:10,height:10},translate:{x:1,y:.8},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 0, 0, 1)",stroke:"rgba(255, 255, 255, 1)",strokeWidth:1,cursor:"crosshair"}},{interface:"p2",direction:{x:1,y:0},component:"circleConnector",size:{width:10,height:10},translate:{x:1,y:.2},offset:{x:0,y:0},cssStyle:{fill:"rgba(0, 255, 0, 1)",stroke:"rgba(255, 255, 255, 1)",strokeWidth:1,cursor:"crosshair"}}],line:Object(be["a"])().structure}},Le=[{name:"physicalNetwork",label:"物理网络",structure:{configure:{icon:"#vis-wuliwangluo"}}},{name:"clusterMonitoring",label:"集群监控",structure:{configure:{icon:"#vis-icon-test1"}}}],Ne=function(){return{name:"basicIcon",label:"基础图标",desp:"svg图标节点",inventory:Le.map((function(e){return e.structure=ve()(ze(),e.structure),e}))}},Ee=function(){return{framework:{shape:"circleShape",widget:""},size:{width:50,height:50},anchor:{x:25,y:25},configure:{connector:{hover:!1}},widget:{cssStyle:{padding:"2px 4px","box-sizing":"border-box"}},shape:{cssStyle:{fill:"rgba(255, 255, 255, 0)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:0}},connector:[{interface:"p1",direction:{x:0,y:-1},component:"circleConnector",size:{width:10,height:10},translate:{x:.5,y:1},offset:{x:0,y:0},cssStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2,cursor:"crosshair"}}],line:Object(Oe["a"])().structure}},$e=[{name:"youmuKonpaku",label:"魂魄妖梦",structure:{configure:{backgroundImage:"image/avatar/1.jpg"}}},{name:"marisaKirisame",label:"雾雨魔理沙",structure:{configure:{backgroundImage:"image/avatar/3.jpg"}}}],Me=function(){return{name:"basicPicture",label:"基础图片",desp:"图片节点",inventory:$e.map((function(e){return e.structure=ve()(Ee(),e.structure),e}))}},_e=n("f9f8"),Ce=n("2f14"),Pe=function(e){var t=ve()({},Object(Ce["a"])(q),e),n=t.framework;return n.shape&&P[n.shape]?t.shape=ve()(Object(Ce["a"])(P[n.shape]),t.shape):t.shape={},n.widget&&B[n.widget]?t.widget=ve()(Object(Ce["a"])(B[n.widget]),t.widget):t.widget={},n.connector&&Array.isArray(t.connector)?t.connector.forEach((function(e){D[e.component]&&(e=ve()(e,Object(Ce["a"])(D[e.component])))})):t.connector=[],t.line?t.line=Object(_e["a"])(t.line):t.line={},JSON.parse(JSON.stringify(t))},We=function(e){return e.inventory.forEach((function(e){e.structure=Pe(e.structure)})),JSON.parse(JSON.stringify(e))},De=[We(we()),We(Se()),We(Ne()),We(Me())],Te={components:{nodeDisplayWindow:me},data:function(){var e=De.map((function(e){return e.name}));return{active:e,windowWidth:100,windowHeight:80,themeMenu:De}},methods:{}},Be=Te,Ye=(n("11cd"),Object(y["a"])(Be,ce,ue,!1,null,"294ffe98",null)),Je=Ye.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"functionView-container"},[n("el-tabs",{attrs:{type:"card"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("el-tab-pane",{attrs:{label:"配置",name:"configure"}},[n("configure-view")],1),n("el-tab-pane",{attrs:{label:"交互",name:"second"}},[e._v("交互管理")])],1)],1)},qe=[],Ae=function(){return n.e("chunk-302a3dcd").then(n.bind(null,"6632"))},Fe={components:{configureView:Ae},data:function(){return{active:"configure"}}},Ue=Fe,He=(n("cca1"),Object(y["a"])(Ue,Xe,qe,!1,null,"38738bcd",null)),Ie=He.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topNavView-container"},[n("left-part"),n("middle-part"),n("right-part")],1)},Re=[],Ke=function(){return n.e("chunk-4668870e").then(n.bind(null,"d2fb"))},Ge=function(){return n.e("chunk-13c70568").then(n.bind(null,"9807"))},Qe=function(){return n.e("chunk-6c042e96").then(n.bind(null,"2a628"))},Ze={components:{leftPart:Qe,rightPart:Ke,middlePart:Ge}},et=Ze,tt=(n("aa43"),Object(y["a"])(et,Ve,Re,!1,null,"5d0b7863",null)),nt=tt.exports,rt={components:{canvasView:ae,objectView:Je,functionView:Ie,topNavView:nt},data:function(){return{key:""}},beforeCreate:function(){var e=this;this.axios.get("/icon/config.json").then((function(t){200===t.status?t.data.forEach((function(t){var n=e.axios.defaults.baseURL,r=document.createElement("script");r.src="".concat(n).concat(t.js);var i=document.createElement("link");i.rel="stylesheet",i.href="".concat(n).concat(t.css),document.body.appendChild(r),document.head.appendChild(i)})):e.$message.error("请求错误！")}))},mounted:function(){window.NProgress.done();var e=localStorage.getItem("vis-topology");if(!e)return!1;e=JSON.parse(e);var t=this.$message({showClose:!0,message:"正在读取数据...",iconClass:"el-icon-loading",duration:0});this.$store.commit("stage/setSize",e.stage.size),this.$store.commit("structure/loadNodes",e.nodes),this.$store.commit("structure/loadLines",e.lines),t.close()}},it=rt,ot=(n("7c55"),Object(y["a"])(it,d,h,!1,null,null,null)),st=ot.exports,at=n("4360");r["default"].use(u.a),r["default"].config.productionTip=!1,new r["default"]({store:at["default"],render:function(e){return e(st)}}).$mount("#app")},5862:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("551c"),i={};r.keys().forEach((function(e){i[e.replace(/.\/|\.vue$/g,"")]=r(e).default}))},6059:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{canvas:null,offset:{x:0,y:0},scale:1,renderPower:2},getters:{canvas:function(e){return e.canvas},offset:function(e){return e.offset},scale:function(e){return e.scale},renderPower:function(e){return e.renderPower}},mutations:{setCanvas:function(e,t){e.canvas=t},setOffset:function(e,t){e.offset=Object.assign(e.offset,t)},setScale:function(e,t){e.scale=t},setRenderPower:function(e,t){e.renderPower=t}},actions:{}}},"61d4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"arrowWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:"0 0 "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"auto"}},[n("path",{style:e.cssStyle,attrs:{d:e.d}})])},i=[],o=(n("99af"),{name:"arrowWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{size:{width:12,height:12},ref:{x:30,y:6},tail:2}}},cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 1)",stroke:"",strokeWidth:1,cursor:"crosshair"}}}},computed:{d:function(){var e=this.configure.size,t=this.configure.tail;return"M 0 0 L ".concat(e.width," ").concat(e.height/2," L 0 ").concat(e.height," L ").concat(t," ").concat(e.height/2," L 0 0")}}}),s=o,a=n("2877"),c=Object(a["a"])(s,r,i,!1,null,"2dec7487",null);t["default"]=c.exports},"724c":function(e,t,n){"use strict";n.r(t);n("18a5");t["default"]={namespaced:!0,state:{transform:{show:!1,node:"",translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}},getters:{transform:function(e){return e.transform}},mutations:{setTransform:function(e,t){var n=t.key,r=t.value;void 0!==e.transform[n]&&(e.transform[n]=r)},transformNode:function(e,t){var n=this.getters["structure/getNode"](t);e.transform.translate=n.translate,e.transform.scale=n.scale,e.transform.rotate=n.rotate,e.transform.anchor=n.anchor,e.transform.size=n.size,e.transform.node=n.id,e.transform.show=!0},resetTransform:function(e){e.transform={show:!1,node:"",translate:{x:50,y:50},scale:{x:1,y:1},rotate:0,anchor:{x:25,y:25},size:{width:50,height:50}}}},actions:{}}},"745b":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("5319");var r=n("0af7"),i={};r.keys().forEach((function(e){i[e.replace(/.\/|\.vue$/g,"")]=r(e).default}))},"7c55":function(e,t,n){"use strict";n("2395")},"80a6":function(e,t,n){"use strict";n.r(t);var r=n("5530"),i=(n("e9c4"),n("f9f8")),o=n("ec26"),s=n("5c96");t["default"]={namespaced:!0,state:{defaultLineStructure:i["b"][0].structure,finishFlag:"",dragStartPointer:{x:0,y:0}},getters:{},mutations:{applyDefaultLineStructure:function(e,t){e.defaultLineStructure=JSON.parse(JSON.stringify(t))},setDragStartPointer:function(e,t){e.dragStartPointer=Object.assign(e.dragStartPointer,t)},start:function(e,t){var n=this,i=JSON.parse(JSON.stringify(e.defaultLineStructure));i.id=Object(o["a"])(),i.start=Object(r["a"])({},t),i.end.position=Object(r["a"])({},i.start.position);var s=this.getters["component/getNode"](i.start.node);s.line.connective[i.id]="start",e.finishFlag="end",this.commit("structure/addLine",i),this.commit("active/setLine",i.id);var a=this.getters["canvas/canvas"],c=this.getters["canvas/scale"],u=i.end.position,d=Object(r["a"])({},u),h=e.dragStartPointer,f=function(e){u.x=d.x+Math.round((e.clientX-h.x)*c),u.y=d.y+Math.round((e.clientY-h.y)*c)},l=function e(){n.commit("structure/deleteLine",i.id),a.removeEventListener("mousemove",f),a.removeEventListener("mouseleave",e)},p=function e(){a.removeEventListener("mousemove",f),a.removeEventListener("mouseleave",l),a.removeEventListener("mouseup",e)};a.addEventListener("mousemove",f),a.addEventListener("mouseleave",l),a.addEventListener("mouseup",p)},finish:function(e,t){var n=this.getters["active/line"];if(!n)return!1;if(n.start.node&&t.node===n.start.node){var r=n.start.position,i=n.end.position,o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));return o<5&&this.commit("structure/deleteLine",n.id),s["Message"].warning("节点不能链接本身！"),!1}Object.assign(n.end,t),console.log(n);var a=this.getters["component/getNode"](n.end.node);a.line.connective[n.id]=e.finishFlag},setFinishFlag:function(e,t){e.finishFlag=t}},actions:{}}},"89d3":function(e,t,n){var r={"./active.js":"2475","./adsorb.js":"0380","./canvas.js":"6059","./component.js":"e030","./connect.js":"80a6","./controls.js":"724c","./index.js":"4360","./stage.js":"b58a","./structure.js":"bf24"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="89d3"},"8aab":function(e,t,n){},aa43:function(e,t,n){"use strict";n("fdaf")},b022:function(e,t,n){},b256:function(e,t,n){var r={"./textAreaWidget.vue":"3916"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="b256"},b514:function(e,t,n){"use strict";t["a"]={props:{startPosition:{type:Object,required:!0},endPosition:{type:Object,required:!0},startMessage:{type:Object,required:!0},endMessage:{type:Object,required:!0},markerStart:{type:String},markerMid:{type:String},markerEnd:{type:String}}}},b58a:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{size:{width:827,height:1169},translate:{x:0,y:0}},getters:{size:function(e){return e.size},translate:function(e){return e.translate}},mutations:{setSize:function(e,t){e.size=t},setTranslate:function(e,t){e.translate=t}},actions:{}}},baad:function(e,t,n){},bbbc:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{style:e.cssStyle,attrs:{width:e.size.width,height:e.size.height}})},i=[],o={name:"rectShape",props:{size:{type:Object,required:!0},cssStyle:{type:Object,default:function(){return{fill:"red",stroke:"black",strokeWidth:2}}}},created:function(){}},s=o,a=n("2877"),c=Object(a["a"])(s,r,i,!1,null,"1e355182",null);t["default"]=c.exports},bf24:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("159b"),n("b64b");var r=n("2b0e");t["default"]={namespaced:!0,state:{nodes:{},lines:{}},getters:{nodes:function(e){return e.nodes},lines:function(e){return e.lines},getNode:function(e){return function(t){return e.nodes[t]}},getLine:function(e){return function(t){return e.lines[t]}}},mutations:{addNode:function(e,t){var n=this;e.nodes[t.id]=r["default"].observable(t),e.nodes.__ob__.dep.notify(),r["default"].nextTick((function(){n.commit("component/cacheNode",t.id),n.commit("adsorb/updateNode",t.id)}))},deleteNode:function(e,t){this.commit("component/clearCacheNode",t),this.commit("adsorb/clearNode",t),r["default"].delete(e.nodes,t)},addLine:function(e,t){e.lines[t.id]=r["default"].observable(t),e.lines.__ob__.dep.notify()},deleteLine:function(e,t){var n=e.lines[t];if(!n)return console.error("can not get this line id: '".concat(t,"'")),!1;if(n.start.node){var i=e.nodes[n.start.node];i&&(i.line.connective[n.id]?delete i.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}if(n.end.node){var o=e.nodes[n.end.node];o&&(o.line.connective[n.id]?delete o.line.connective[n.id]:console.error("stat node can not found this line: '".concat(n.id,"'")))}r["default"].delete(e.lines,t)},clearNodes:function(e){this.commit("component/clearCacheNodes"),e.nodes={}},clearLines:function(e){e.lines={}},loadNodes:function(e,t){var n=this;e.nodes=t,r["default"].nextTick((function(){Object.keys(t).forEach((function(e){n.commit("component/cacheNode",e),n.commit("adsorb/updateNode",e)}))}))},loadLines:function(e,t){e.lines=t}},actions:{}}},cca1:function(e,t,n){"use strict";n("ddd6")},d3b9:function(e,t,n){"use strict";n("068c")},ddd6:function(e,t,n){},def3:function(e,t,n){"use strict";t["a"]=function(){return{name:"basicLinear",label:"基础直线",desp:"干净的直线",structure:{framework:{shape:"linearShape",markerStart:"",markerMid:"",markerEnd:"arrowWidget"},shape:{},markerStart:{},markerMid:{},markerEnd:{}}}}},e030:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{canvas:"",nodes:{}},getters:{getNode:function(e){return function(t){return e.nodes[t]}},canvas:function(e){return e.canvas}},mutations:{setCanvas:function(e,t){e.canvas=t},cacheNode:function(e,t){var n=e.canvas.$refs[t][0];n&&(e.nodes[n.id]=n)},clearCacheNode:function(e,t){delete e.nodes[t]},clearCacheNodes:function(e){e.nodes={}}},actions:{}}},e044:function(e,t,n){"use strict";n("fd87")},e0bd:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("marker",{attrs:{id:e.id+"textWidget",markerWidth:e.configure.size.width,markerHeight:e.configure.size.height,markerUnits:"userSpaceOnUse",viewBox:-e.configure.size.width/2+" "+-e.configure.size.height/2+" "+e.configure.size.width+" "+e.configure.size.height,refX:e.configure.ref.x,refY:e.configure.ref.y,orient:"0"}},[n("rect",{style:e.shapeStyle,attrs:{width:e.configure.size.width,height:e.configure.size.height,transform:"translate("+-e.configure.size.width/2+", "+-e.configure.size.height/2+")"}}),n("text",{style:e.textStyle,attrs:{x:-e.configure.textLength/2,y:parseInt(e.cssStyle.fontSize)/2,"font-size":e.cssStyle.fontSize,textLength:e.configure.textLength}},[e._v(" "+e._s(e.configure.value)+" ")])])},i=[],o=(n("cb29"),{name:"textWidget",props:{id:{type:String,required:!0},configure:{type:Object,default:function(){return{size:{width:54,height:18},ref:{x:0,y:0},value:"一段文本",textLength:50}}},cssStyle:{type:Object,default:function(){return{color:"rgba(255, 255, 255,1)",fontSize:"14px",fill:"rgba(15, 236, 182, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:0,padding:2}}}},computed:{textStyle:function(){var e=this.cssStyle;return{fill:e.color,fontSize:e.fontSize}},shapeStyle:function(){var e=this.cssStyle;return{fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth}}}}),s=o,a=n("2877"),c=Object(a["a"])(s,r,i,!1,null,"149c0d0a",null);t["default"]=c.exports},e1d2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("path",{style:e.cssStyle,attrs:{d:"M "+e.startPosition.x+" "+e.startPosition.y+" L "+e.middlePoint.x+" "+e.middlePoint.y+" L "+e.endPosition.x+" "+e.endPosition.y+" ","marker-start":"url(#"+e.markerStart+")","marker-mid":"url(#"+e.markerMid+")","marker-end":"url(#"+e.markerEnd+")"}})},i=[],o=n("b514"),s={name:"linear",mixins:[o["a"]],props:{cssStyle:{type:Object,default:function(){return{fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 147, 255, 1)",strokeWidth:2}}}},computed:{middlePoint:function(){return{x:(this.endPosition.x-this.startPosition.x)/2+this.startPosition.x,y:(this.endPosition.y-this.startPosition.y)/2+this.startPosition.y}}}},a=s,c=n("2877"),u=Object(c["a"])(a,r,i,!1,null,"75974c7b",null);t["default"]=u.exports},f9f8:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return l}));var r=n("7ce2"),i=n.n(r),o=n("5862"),s=n("745b"),a=n("52ee"),c=n("2f14"),u=n("def3"),d=n("562e"),h=function(e){var t=i()({},Object(c["a"])(a["a"]),e),n=t.framework;return n.shape&&o["a"][n.shape]&&(t.shape=i()(Object(c["a"])(o["a"][n.shape]),t.shape)),n.markerStart&&s["a"][n.markerStart]&&(t.markerStart=i()(Object(c["a"])(s["a"][n.markerStart]),t.markerStart)),n.markerMid&&s["a"][n.markerMid]&&(t.markerMid=i()(Object(c["a"])(s["a"][n.markerMid]),t.markerMid)),n.markerEnd&&s["a"][n.markerEnd]&&(t.markerEnd=i()(Object(c["a"])(s["a"][n.markerEnd]),t.markerEnd)),t},f=function(e){return Object.assign({},e,{structure:h(e.structure)})},l=[f(Object(u["a"])()),f(Object(d["a"])())]},faa9:function(e,t,n){"use strict";n("b022")},fd87:function(e,t,n){},fdaf:function(e,t,n){}});